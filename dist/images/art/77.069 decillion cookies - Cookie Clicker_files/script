
(function() {
try {


var undefined;


var debug;
var ADventori;

var _ADventori_data = {"request":{"protocol":"https://","domainName":"adventori.com","hostname":"f16.adventori.com","remoteIps":["90.241.43.51"]},"params":{"_errors":null,"adloox-sourceUrl":"http://orteil.dashnet.org/cookieclicker/","clickTag":"https://googleads.g.doubleclick.net/dbm/clk?sa=L&ai=Cps0t2vsXW76DCs_ftgfVsa2ICMijqvhRo9rFleoG1Pq9hYoJEAEghuWADWC77peD0AqgAdaEpsYDyAEJqQIH6zeStLOzPqgDAaoEwAFP0GW3iMdcPf2ZSIa85etACAH4nAjF_RdcYm3XyNuY5fpkB4Lqe9K1NeJwueugzLgfIDXu_-b98FNpz_-rIgHifWoJMrs4oXCqUcOtme6m8jcf-yw_nwuPRbRdNDnJrcJlqnrwTsYfNAL2RNDjPUf9BIUXwNYC12aBHc2xk0fJnhW56omRqdh596bFFcj399lpiaD_nRzUHzc3JNsUzZQz96kmnh8dxszbRbaBDAA3hEKxKt9KnHSEnz-3VVtpekbgBAOQBgGgBk2AB5L72TmoB47OG6gHjc0bqAfVyRuoB9nLG6gHz8wbqAemvhuoB5jOG9gHANIICQiAgYAQEAEYAoAKAdATANgTAw&num=1&cid=CAASEuRoS-kbsAJ4JRiHVzDBMAcrhQ&sig=AOD64_2F-a0nRlgoNCRJ4-9S7YZtF6UERQ&client=ca-pub-8491708950677704&dbm_c=AKAmf-CaN6PbJIKWUMePi6aqpSBU--eeYgljbhBPTwm4Bv370DucOQ_Sy4PsJ-sc5X7fGxH2AAVf&dbm_d=AKAmf-CfjKHpnFiwUfNB8Qp5w43TPTQWtnjf75UePO5B1KwkiijaYTGM08WHOVZhcA4z39sLeIf-ERC8k8OHaWUbf-SVhZHix6wp2kjOFF64w7WjEldECiV7QvxhYN_twjRx9iwz6UiBZglU29n35Pd3VqYsEKyV0GfsHrTfEhJrARjR5nzGCwuiOR6A-BkCZn4ew1nGCjWHwpIJv7kSN-XCWEuhF0mVib6B83zAskUZUTBsEmsE_vaKDe7CaRPiY0n2nSKXRHRi92fmPcj5N4lVIolxUd7jYpcCrV2Soyw2IwiH1RVGOJgsriqkEnPUSkmqcjRQXLyVvj2Pmmgl9lObnhrTED5_yQSJUnJdmjPlut3JAhVNEU2ZzM2E6Jn95VrkjvZBpT8Go64xeJfO7px64PgAXyUrUQ&adurl=","adloox-exchangeId":"1","adloox-creativeId":"12717988","dbmPixelIds":"15629818","adloox-publisherId":"1","cachebuster":"1528298458164286","adloox-insertionOrderId":"4334554","placementId":"Europcar_Netbooster_201507_RON_300x250","brandId":"16248065","format":null},"size":{"width":300,"height":250},"brand":{"id":16248065},"campaign":{"id":16249455,"name":"Europcar_Netbooster_201507","campaignId":"Europcar_Netbooster_201507"},"placement":{"id":6037,"name":"Europcar_Netbooster_201507_RON_300x250","placementId":"Europcar_Netbooster_201507_RON_300x250","placesSelectStrategy":"HYBRID","redirectToRetailerUrlClick":false,"externalLandingPageUrl":null,"maxPlaces":4,"displayFormat":"HTML","size":{"width":300,"height":250},"displayTag":null,"clickTag":null,"adUrl":"[PROTOCOL][HOSTNAME]/lp/dd/europcar/Europcar_Netbooster_201507/creas/new/RON-V2/[SIZE]/index.html","imgUrl":"[PROTOCOL][HOSTNAME]/lp/dd/europcar/Europcar_Netbooster_201507/creas/new/backup/[MARKET]/[SIZE].jpg","passbackUrl":null,"ieMinVersion":9,"autoStart":"WRITE","track":{"view":false,"errorCreative":true},"useSkipOffset":false,"skipOffset":null,"siteTracker":{"useTag":true,"tagVersion":"v3","tagUrl":"/lp/sitetracker/tag.js"},"adServer":{"clickRedirectionEncoded":false,"clickTagEnd":false},"mraid":{"responsive":true}},"track":{"tracker":{"type":"AdDisplay","campaignId":"Europcar_Netbooster_201507","cartoucheId":"Europcar_Netbooster_201507_RON_300x250","ui":"zbm9sO-fEeeDYZfCwOhdVg","ip":"90.241.43.51","geoipAffiliationCityId":null,"geoipStatus":null,"context":"googleads.g.doubleclick.net|","clickTagDomaineName":"googleads.g.doubleclick.net","urlClick":null,"mode":null,"affiliationCityId":null,"retailer_1":null,"retailer_2":null,"retailer_3":null,"retailer_4":null,"impressionId":"d088af73-69a1-11e8-b4e8-a58b511931d4","acceptsThirdPartyCookies":true},"trackPrintUrl":"/tracker/trackPrint","trackClickUrl":"/tracker/trackClick","uiHash":784265982,"referer":"https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-8491708950677704&output=html&h=250&slotname=9349826096&adk=3406896063&adf=1256866588&w=300&lmt=1524259785&pucrd=CgwIABAAGAMgACgAOAESAhgHeAM&guci=1.2.0.0.2.2.0&format=300x250&url=http%3A%2F%2Forteil.dashnet.org%2Fcookieclicker%2F&flash=0&avail_w=300&wgl=1&adsid=AKyF-letozX4IhdQbJmBXW0nmWm9VKHOO3LiYaNSJAr7OlNsH3gahxI&dt=1528298457527&bpp=25&bdt=627&fdt=571&idt=573&shv=r20180531&cbv=r20180604&saldr=aa&abxe=1&prev_fmts=300x250&correlator=6999268639688&frm=20&ga_vid=320768229.1514715149&ga_sid=1528298458&ga_hid=1296568905&ga_fc=0&pv=1&iag=0&icsg=10735530&dssz=16&mdo=0&mso=0&u_tz=60&u_his=2&u_java=0&u_h=800&u_w=1280&u_ah=725&u_aw=1280&u_cd=24&u_nplug=4&u_nmime=5&adx=1049&ady=797&biw=1365&bih=751&scr_x=0&scr_y=0&eid=21061122%2C21061995&oid=3&rx=0&eae=0&fc=528&brdim=135%2C22%2C135%2C22%2C1280%2C22%2C1024%2C660%2C1365%2C750&vis=1&rsz=%7C%7CaeEbr%7C&abl=CA&ppjl=t&pfx=0&fu=16&bc=7&jar=2018-6-6-13&ifi=2&fsb=1&xpc=j5kD2rrSTN&p=http%3A//orteil.dashnet.org&dtd=591","timestamp":1528300434407,"viewability":{"area":null}},"metadata":{},"campaignData":{"acquisition":"{\"AU_RET-GEN_CARS\":{\"country\":\"AU\",\"scenario\":\"RET-GEN\",\"idDBM\":\"11698260|11699238|5229061|5229062|5229063|5229065|5229067|5229068|5229070|5229073|5229077|5229780|5229788\\n\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=384&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.com.au/deals/15off5?xtor=AD-2110-[RETARGETING_AU]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Get 15% off base rate* 5+ days\",\"txt\":\"An affordable getaway with Europcar\",\"vignette1\":\"5+ days\",\"vignette2\":\"15%\",\"vignette3\":\"off*\",\"cta\":\"BOOK NOW\",\"mentions\":\"*See conditions\",\"photo\":\"AU_GENERICCAR_Q1.jpg\",\"logo\":\"logo.png\"},\"BE_RET-GEN_CARS\":{\"country\":\"BE\",\"scenario\":\"RET-GEN\",\"idDBM\":\"11702598|11702795|5147786\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=383&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.be/nl/aanbiedingen/onze-beste-tarieven?xtor=AD-2120-[RETARGETING_BE]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Boek uw auto aan de beste prijs\",\"txt\":\"Reserveer online en bespaar met Europcar!\",\"vignette1\":\"Onze\",\"vignette2\":\"beste\",\"vignette3\":\"tarieven*\",\"cta\":\"Reserveer nu\",\"mentions\":\"*zie voorwaarden\",\"photo\":\"BE_GENERICCAR_Q1.jpg\",\"logo\":\"logo.png\"},\"COM_GENERICCAR_TO_DE\":{\"country\":\"COM\",\"scenario\":\"GENERICCAR_TO_DE\",\"idDBM\":\"12561512|12561530|12561506|12561499\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=357&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.com/offers/prepay-online-and-save?xtor=AD-2000-[GENERICCAR_COM_TO_DE]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Travel in Europe with Europcar!\",\"txt\":\"Rent your car and save up to 25% online\",\"vignette1\":\"Up to\",\"vignette2\":\"25%\",\"vignette3\":\"off!*\",\"cta\":\"BOOK NOW\",\"mentions\":\"*See conditions\",\"photo\":\"COM_GENERICCAR_TO_DE.jpg\",\"logo\":\"logo.png\"},\"COM_GENERICCAR_TO_ES\":{\"country\":\"COM\",\"scenario\":\"GENERICCAR_TO_ES\",\"idDBM\":\"12561517\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=357&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.com/offers/prepay-online-and-save?xtor=AD-2000-[GENERICCAR_COM_TO_ES]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Travel in Europe with Europcar!\",\"txt\":\"Rent your car and save up to 25% online\",\"vignette1\":\"Up to\",\"vignette2\":\"25%\",\"vignette3\":\"off!*\",\"cta\":\"BOOK NOW\",\"mentions\":\"*See conditions\",\"photo\":\"GENERICCAR_TO_ES.jpg\",\"logo\":\"logo.png\"},\"COM_GENERICCAR_TO_FR\":{\"country\":\"COM\",\"scenario\":\"GENERICCAR_TO_FR\",\"idDBM\":\"12561510|12561483|12561529|12561505\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=357&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.com/offers/prepay-online-and-save?xtor=AD-2000-[GENERICCAR_COM_TO_FR]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Travel in Europe with Europcar!\",\"txt\":\"Rent your car and save up to 25% online\",\"vignette1\":\"Up to\",\"vignette2\":\"25%\",\"vignette3\":\"off!*\",\"cta\":\"BOOK NOW\",\"mentions\":\"*See conditions\",\"photo\":\"COM_GENERICCAR_TO_FR.jpg\",\"logo\":\"logo.png\"},\"COM_GENERICCAR_TO_IT\":{\"country\":\"COM\",\"scenario\":\"GENERICCAR_TO_IT\",\"idDBM\":\"12561515\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=357&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.com/offers/prepay-online-and-save?xtor=AD-2000-[GENERICCAR_COM_TO_IT]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Travel in Europe with Europcar!\",\"txt\":\"Rent your car and save up to 25% online\",\"vignette1\":\"Up to\",\"vignette2\":\"25%\",\"vignette3\":\"off!*\",\"cta\":\"BOOK NOW\",\"mentions\":\"*See conditions\",\"photo\":\"COM_GENERICCAR_TO_IT.jpg\",\"logo\":\"logo.png\"},\"COM_GENERICCAR_TO_PT\":{\"country\":\"COM\",\"scenario\":\"GENERICCAR_TO_PT\",\"idDBM\":\"12561516\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=357&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.com/offers/prepay-online-and-save?xtor=AD-2000-[GENERICCAR_COM_TO_PT]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Travel in Europe with Europcar!\",\"txt\":\"Rent your car and save up to 25% online\",\"vignette1\":\"Up to\",\"vignette2\":\"25%\",\"vignette3\":\"off!*\",\"cta\":\"BOOK NOW\",\"mentions\":\"*See conditions\",\"photo\":\"COM_GENERICCAR_TO_PT.jpg\",\"logo\":\"logo.png\"},\"COM_GENERICCAR_TO_UK\":{\"country\":\"COM\",\"scenario\":\"GENERICCAR_TO_UK\",\"idDBM\":\"12561511|12561500|12561528|12561507\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=357&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.com/offers/prepay-online-and-save?xtor=AD-2000-[GENERICCAR_COM_TO_UK]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Travel in Europe with Europcar!\",\"txt\":\"Rent your car and save up to 25% online\",\"vignette1\":\"Up to\",\"vignette2\":\"25%\",\"vignette3\":\"off!*\",\"cta\":\"BOOK NOW\",\"mentions\":\"*See conditions\",\"photo\":\"COM_GENERICCAR_TO_UK.jpg\",\"logo\":\"logo.png\"},\"COM_RET-GEN_CARS\":{\"country\":\"COM\",\"scenario\":\"RET-GEN\",\"idDBM\":\"11710545|11710548|3453118|3453124|3453125|3453126|3453127|3453130|3453132|3453133\\n\\n\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=357&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.com/offers/spring-online-savings?xtor=AD-2100-[RETARGETING_COM]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Simple, affordable car hire\",\"txt\":\"Book now at great prices\",\"vignette1\":\"Up to\",\"vignette2\":\"25%\",\"vignette3\":\"off!*\",\"cta\":\"BOOK NOW\",\"mentions\":\"*See conditions\",\"photo\":\"COM_GENERICCAR_Q1.jpg\",\"logo\":\"logo.png\"},\"DE_GENERICCAR\":{\"country\":\"DE\",\"scenario\":\"GENERICCAR\",\"idDBM\":\"11202850|11202845|11202860|11202857|11202851|11202849|11202854|11202865|11202852|11202853|12368707|11956119|12400974|12616093|12616099|12651539\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=378&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.de/autovermietung-angebote/mietwagen-rabatt-fruehling?xtor=AD-2030-[ACQUISITION_DE]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Unser Frühlings-Special für Sie\",\"txt\":\"Der passende Mietwagen zum besten Preis!\",\"vignette1\":\"Jetzt\",\"vignette2\":\"10%\",\"vignette3\":\"Rabatt*\",\"cta\":\"JETZT BUCHEN\",\"mentions\":\"*Siehe bedingungen\",\"photo\":\"DE_GENERICCAR_Q2.jpg\",\"logo\":\"logo.png\"},\"DE_genericcar_Adara\":{\"country\":\"DE\",\"scenario\":\"genericcar_Adara\",\"idDBM\":\"de_adara\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=378&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.de/autovermietung-angebote/mietwagen-rabatt-fruehling?xtor=AD-2030-[ACQUISITION_DE]-[STP1]-[IAB]-[ADARA]-[EUROPE]-[Banner]&utm_source=display&utm_medium=adara&utm_campaign=Global_Promo_Q2\",\"introStation\":\"Unser Frühlings-Special für Sie\",\"txt\":\"Der passende Mietwagen zum besten Preis!\",\"vignette1\":\"Jetzt\",\"vignette2\":\"10%\",\"vignette3\":\"Rabatt*\",\"cta\":\"JETZT BUCHEN\",\"mentions\":\"*Siehe bedingungen\",\"photo\":\"DE_GENERICCAR_Q2.jpg\",\"logo\":\"logo.png\"},\"DE_RET-GEN_CARS\":{\"country\":\"DE\",\"scenario\":\"RET-GEN\",\"idDBM\":\"11712823|11713256|3430721|3430724|3430730|3430731|3430736|3430737|4333879|\\n\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=378&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.de/autovermietung-angebote/mietwagen-rabatt-fruehling?xtor=AD-2130-[RETARGETING_DE]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Unser Frühlings-Special für Sie\",\"txt\":\"Der passende Mietwagen zum besten Preis!\",\"vignette1\":\"Jetzt\",\"vignette2\":\"10%\",\"vignette3\":\"Rabatt*\",\"cta\":\"JETZT BUCHEN\",\"mentions\":\"*Siehe bedingungen\",\"photo\":\"DE_GENERICCAR_Q2.jpg\",\"logo\":\"logo.png\"},\"ES_RET-GEN_CARS\":{\"country\":\"ES\",\"scenario\":\"RET-GEN\",\"idDBM\":\"11713147|11714496|3431156|3431157|3431158|3431159|3431160|3431161|3431162|3431163|3431164|3431165|3431166|3431167\\n\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=380&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.es/ofertas/alquiler-coche-2018?xtor=AD-2140-[RETARGETING_ES]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Consigue el mejor preio\",\"txt\":\"20% dto en tu alquiler de coche\",\"vignette1\":\"\",\"vignette2\":\"20%\",\"vignette3\":\"dto*\",\"cta\":\"Reservar\",\"mentions\":\"*Ver condiciones\",\"photo\":\"ES_GENERICCAR_Q2.jpg\",\"logo\":\"logo.png\"},\"FR_genericcar_Adara\":{\"country\":\"FR\",\"scenario\":\"genericcar_Adara\",\"idDBM\":\"fr_adara\",\"displayTag\":\"\",\"clickTag\":\"https://www.europcar.fr/promotion/sept-egal-cinq?xtor=AD-2050-[ACQUISITION_FR]-[STP1]-[IAB]-[ADARA]-[EUROPE]-[Banner]&utm_source=display&utm_medium=adara&utm_campaign=Global_Promo_Q2\",\"introStation\":\"Partez 7 jours au prix de 5\",\"txt\":\"Maîtriser votre budget en louant 1 semaine\",\"vignette1\":\"Bon plan\",\"vignette2\":\"2 jours\",\"vignette3\":\"offerts*\",\"cta\":\"J'EN PROFITE\",\"mentions\":\"*Voir conditions\",\"photo\":\"FR_GENERICCAR_Q2.jpg\",\"logo\":\"logo.png\"},\"FR_RET-GEN_CARS\":{\"country\":\"FR\",\"scenario\":\"RET-GEN\",\"idDBM\":\"11714558|11714790|3442683|3442684|3442686|3442688|3442689|3442690|3442694|3442695|3442696|4334124\\n\",\"displayTag\":\"\",\"clickTag\":\"https://www.europcar.fr/promotion/sept-egal-cinq?xtor=AD-2150-[RETARGETING_FR]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Partez 7 jours au prix de 5\",\"txt\":\"Maîtriser votre budget en louant 1 semaine\",\"vignette1\":\"Bon plan\",\"vignette2\":\"2 jours\",\"vignette3\":\"offerts*\",\"cta\":\"J'EN PROFITE\",\"mentions\":\"*Voir conditions\",\"photo\":\"FR_GENERICCAR_Q2.jpg\",\"logo\":\"logo.png\"},\"IT_RET-GEN_CARS\":{\"country\":\"IT\",\"scenario\":\"RET-GEN\",\"idDBM\":\"11716774|11717346|3453286|3453288|3453289|3453290|3453291|3453293|3453294|3453295|3453296|3453297|3453298|4334133\\n\\n\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=381&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.it/offerte-promozione-25-off?xtor=AD-2160-[RETARGETING_IT]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Parti on the road in Italia\",\"txt\":\"E risparmia sul tuo noleggio auto!\",\"vignette1\":\"Fino al\",\"vignette2\":\"25%\",\"vignette3\":\"di sconto!\",\"cta\":\"PRENOTA ORA\",\"mentions\":\"*Vedere le condizioni\",\"photo\":\"IT_GENERICCAR_Q2.jpg\",\"logo\":\"logo.png\"},\"NZ_RET-GEN_CARS\":{\"country\":\"NZ\",\"scenario\":\"RET-GEN\",\"idDBM\":\"11718319|11718584|5227092|5227094|5227095|5227096|5227097|5227098|5227100|5227101|5227102|5227104|\\n\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=385&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.co.nz/new-zealand-car-rental-deals/15-off-5-days?xtor=AD-2170-[RETARGETING_NZ]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Get 15% off base rate* 5+ days\",\"txt\":\"Book this great deal with Europcar\",\"vignette1\":\"5+ days\",\"vignette2\":\"15%\",\"vignette3\":\"off*\",\"cta\":\"BOOK NOW\",\"mentions\":\"*See conditions\",\"photo\":\"NZ_GENERICCAR_Q2.jpg\",\"logo\":\"logo.png\"},\"PT_GENERICCAR_ADARA_TO_PT\":{\"country\":\"PT\",\"scenario\":\"GENERICCAR_ADARA_TO_PT\",\"idDBM\":\"pt_adara\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=382&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.pt/promocao/nostalgia-pos-verao-17?xtor=AD-2080-[ACQUISITION_PT]-[STP1]-[IAB]-[ADARA]-[EUROPE]-[Banner]&utm_source=display&utm_medium=adara&utm_campaign=Global_Promo_Q2\",\"introStation\":\"Promoção nostalgia pós-verão\",\"txt\":\"Levem-me de volta para as férias!\",\"vignette1\":\"Até\",\"vignette2\":\"20%\",\"vignette3\":\"desconto*\",\"cta\":\"RESERVE JÁ\",\"mentions\":\"*Ver condições\",\"photo\":\"OP_SPE_SEPT.jpg\",\"logo\":\"logo.png\"},\"PT_RET-GEN_CARS\":{\"country\":\"PT\",\"scenario\":\"RET-GEN\",\"idDBM\":\"11718665|11718897|3980265|3980271|3980600|3980633|3980645|3980646|3980649|3980650|3980651|3980653|3980654\\n\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=382&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.pt/promocoes/ate25porcentodesconto?xtor=AD-2180-[RETARGETING_PT]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Reserve o seu carro hoje!\",\"txt\":\"Até -25% ao pré-pagar a sua reserva de carro\",\"vignette1\":\"Até\",\"vignette2\":\"25%\",\"vignette3\":\"desconto\",\"cta\":\"RESERVE JÁ\",\"mentions\":\"*Ver condições\",\"photo\":\"PT_GENERICCAR_Q2.jpg\",\"logo\":\"logo.png\"},\"UK_GENERICCAR\":{\"country\":\"UK\",\"scenario\":\"GENERICCAR\",\"idDBM\":\"11204068|11204063|11204075|11204073|11204072|11204060|11204074|11204071|11204064|11204065|11204061|11204062|11204070|11204078|11204066|11204067|11204076|11204079|11204480|11204077|11204481|11204069|11956113|12402123|12616092|12616102|12651541\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=379&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.co.uk/deals/spring-car-hire?xtor=AD-2090-[ACQUISITION_UK]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Get great deals on car hire\",\"txt\":\"and explore the open road from just £14 per day\",\"vignette1\":\"From\",\"vignette2\":\"£14\",\"vignette3\":\"per day*\",\"cta\":\"BOOK NOW\",\"mentions\":\"*See conditions\",\"photo\":\"UK_GENERICCAR_Q1.jpg\",\"logo\":\"logo.png\"},\"UK_genericcar_Adara\":{\"country\":\"UK\",\"scenario\":\"genericcar_Adara\",\"idDBM\":\"uk_adara\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=379&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.co.uk/deals/spring-car-hire?xtor=AD-2090-[ACQUISITION_UK]-[STP1]-[IAB]-[ADARA]-[EUROPE]-[Banner]&utm_source=display&utm_medium=adara&utm_campaign=Global_Promo_Q2\",\"introStation\":\"Get great deals on car hire\",\"txt\":\"and explore the open road from just £14 per day\",\"vignette1\":\"From\",\"vignette2\":\"£14\",\"vignette3\":\"per day*\",\"cta\":\"BOOK NOW\",\"mentions\":\"*See conditions\",\"photo\":\"UK_GENERICCAR_Q1.jpg\",\"logo\":\"logo.png\"},\"UK_RET-GEN_CARS\":{\"country\":\"UK\",\"scenario\":\"RET-GEN\",\"idDBM\":\"11719805|11719905|3431835|3431836|3431838|3431842|3431845|3431848|3431849\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=379&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.co.uk/deals/spring-car-hire?xtor=AD-2190-[RETARGETING_UK]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Get great deals on car hire\",\"txt\":\"and explore the open road from just £14 per day\",\"vignette1\":\"From\",\"vignette2\":\"£14\",\"vignette3\":\"per day*\",\"cta\":\"BOOK NOW\",\"mentions\":\"*See conditions\",\"photo\":\"UK_GENERICCAR_Q1.jpg\",\"logo\":\"logo.png\"},\"UK_RET_BACKUP\":{\"country\":\"all\",\"scenario\":\"BACKUP\",\"idDBM\":\"BACKUP\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=357&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.co.uk/deals/seasonal-sale?xtor=AD-2100-[OP_SPE_ON_COM]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Book Now and get up to 35% off!\",\"txt\":\"Our Seasonal Sale is here!\",\"vignette1\":\"Up to\",\"vignette2\":\"35%\",\"vignette3\":\"OFF*\",\"cta\":\"BOOK NOW\",\"mentions\":\"*See conditions\",\"photo\":\"ALL_OPE_SPE_APRIL.jpg\",\"logo\":\"logo.png\"},\"UK_CRM\":{\"country\":\"UK\",\"scenario\":\"CRM\",\"idDBM\":\"17871157\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=379&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.co.uk/deals/seasonal-sale-privilege?xtor=AD-2190-[CRM_UK]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"The beach? The country? The city?\",\"txt\":\"Which one is going to be your Spring break?\",\"vignette1\":\"Up to\",\"vignette2\":\"40%\",\"vignette3\":\"off*\",\"cta\":\"BOOK NOW\",\"mentions\":\"*See conditions\",\"photo\":\"ALL_CRM_OPE_SPE.jpg\",\"logo\":\"logo_CRM.png\"},\"DE_CRM\":{\"country\":\"DE\",\"scenario\":\"CRM\",\"idDBM\":\"17871175\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=378&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.de/autovermietung-angebote/privilege/super-sale-fruehling?xtor=AD-2130-[CRM_DE]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Strandurlaub oder Städtetrip?\",\"txt\":\"Wohin geht es für Sie im Frühling?\",\"vignette1\":\"Bis zu\",\"vignette2\":\"40%\",\"vignette3\":\"Rabatt*\",\"cta\":\"Jetzt buchen\",\"mentions\":\"*Siehe Bedingungen\",\"photo\":\"ALL_CRM_OPE_SPE.jpg\",\"logo\":\"logo_CRM.png\"},\"FR_CRM\":{\"country\":\"FR\",\"scenario\":\"CRM\",\"idDBM\":\"17877302\",\"displayTag\":\"\",\"clickTag\":\"https://www.europcar.fr/fidelite/offres-printemps-ete?xtor=AD-2150-[CRM_FR]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"La plage ? La campagne ? La ville ?\",\"txt\":\"Quel sera votre break du Printemps ?\",\"vignette1\":\"Jusqu'à\",\"vignette2\":\"40%\",\"vignette3\":\"de remise*\",\"cta\":\"J'EN PROFITE\",\"mentions\":\"*Voir conditions\",\"photo\":\"ALL_CRM_OPE_SPE.jpg\",\"logo\":\"logo_CRM.png\"},\"COM_CRM\":{\"country\":\"COM\",\"scenario\":\"CRM\",\"idDBM\":\"17877333\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=357&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.com/offers/privilege/spring-summer?xtor=AD-2100-[CRM_COM]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"The beach? The country? The city?\",\"txt\":\"Which one is going to be your Spring break?\",\"vignette1\":\"Up to\",\"vignette2\":\"40%\",\"vignette3\":\"off*\",\"cta\":\"BOOK NOW\",\"mentions\":\"*See conditions\",\"photo\":\"ALL_CRM_OPE_SPE.jpg\",\"logo\":\"logo_CRM.png\"},\"BE_CRM\":{\"country\":\"BE\",\"scenario\":\"CRM\",\"idDBM\":\"17877365\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=383&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.be/nl/aanbiedingen/privilege/lente-en-zomer-autohuur?xtor=AD-2120-[CRM_BE]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Strand? Platteland? Stad?\",\"txt\":\"Wat verkiest u als lenteverlof?\",\"vignette1\":\"Tot\",\"vignette2\":\"40%\",\"vignette3\":\"korting*\",\"cta\":\"Boek nu\",\"mentions\":\"* Zie voorwaarden\",\"photo\":\"ALL_CRM_OPE_SPE.jpg\",\"logo\":\"logo_CRM.png\"},\"ES_CRM\":{\"country\":\"ES\",\"scenario\":\"CRM\",\"idDBM\":\"17877590\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=380&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.es/ofertas/global-privilege-primavera-2018?xtor=AD-2140-[CRM_ES]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"¿Playa? ¿Montaña? ¿O ciudad?\",\"txt\":\"¿Cuál es tu plan para esta primavera?\",\"vignette1\":\"Hasta\",\"vignette2\":\"40%\",\"vignette3\":\"dto*\",\"cta\":\"Reserva ahora\",\"mentions\":\"*Ver condiciones\",\"photo\":\"ALL_CRM_OPE_SPE.jpg\",\"logo\":\"logo_CRM.png\"},\"IT_CRM\":{\"country\":\"IT\",\"scenario\":\"CRM\",\"idDBM\":\"17877635\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=381&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.it/offerte/privilege-saldi-primavera-estate?xtor=AD-2160-[CRM_IT]-[STP1]-[IAB]-[]-[EUROPE]-[Banner]\",\"introStation\":\"La spiaggia? La campagna? La città?\",\"txt\":\"Cosa sceglierai per il tuo break di primavera?\",\"vignette1\":\"Fino al\",\"vignette2\":\"40%\",\"vignette3\":\"sconto*\",\"cta\":\"PRENOTA ORA\",\"mentions\":\"*Vedere le condizioni\",\"photo\":\"ALL_CRM_OPE_SPE.jpg\",\"logo\":\"logo_CRM.png\"},\"AU_CRM\":{\"country\":\"AU\",\"scenario\":\"CRM\",\"idDBM\":\"17877645\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=384&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.com.au/deals/europe-sale-privilege?xtor=AD-2110-[CRM_AU]-[STP1]-[IAB]-[]-[EUROPE]-[Banner]\",\"introStation\":\"Italian Riviera or London sightseeing?\",\"txt\":\"Which will you choose for your Europe holiday?\",\"vignette1\":\"Up to\",\"vignette2\":\"40%\",\"vignette3\":\"off*\",\"cta\":\"BOOK NOW\",\"mentions\":\"*See conditions\",\"photo\":\"AUNZ_CRM_OPE _SPE.jpg\",\"logo\":\"logo_CRM.png\"},\"NZ_CRM\":{\"country\":\"NZ\",\"scenario\":\"CRM\",\"idDBM\":\"17877678\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=385&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.co.nz/deals/europe-sale-privilege?xtor=AD-2170-[CRM_NZ]-[STP1]-[IAB]-[]-[EUROPE]-[Banner]\",\"introStation\":\"Italian Riviera or London sightseeing?\",\"txt\":\"Which will you choose for your Europe holiday?\",\"vignette1\":\"Up to\",\"vignette2\":\"40%\",\"vignette3\":\"off*\",\"cta\":\"BOOK NOW\",\"mentions\":\"*See conditions\",\"photo\":\"AUNZ_CRM_OPE _SPE.jpg\",\"logo\":\"logo_CRM.png\"},\"PT_CRM\":{\"country\":\"PT\",\"scenario\":\"CRM\",\"idDBM\":\"17877844\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=382&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.pt/promocoes/saldos-primavera-verao-privilege-2018?xtor=AD-2180-[CRM_PT]-[STP1]-[IAB]-[]-[EUROPE]-[Banner]\",\"introStation\":\"A praia? O campo? A cidade?\",\"txt\":\"Qual será o seu destino nesta Primavera?\",\"vignette1\":\"Até\",\"vignette2\":\"40%\",\"vignette3\":\"desconto*\",\"cta\":\"Reserve agora\",\"mentions\":\"*Ver condições\",\"photo\":\"ALL_CRM_OPE_SPE.jpg\",\"logo\":\"logo_CRM.png\"}}","opeSpe":"{\"UK_RET_OP-SPE\":{\"country\":\"UK\",\"scenario\":\"RET_OP-SPE\",\"idDBM\":\"11204068|11204063|11204075|11204073|11204072|11204060|11204074|11204071|11204064|11204065|11204061|11204062|11204070|11204078|11204066|11204067|11204076|11204079|11204480|11204077|11204481|11204069|11956113|12402123|12616092|12616102|12651541\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=379&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.co.uk/deals/seasonal-sale?xtor=AD-2190-[OP_SPE_ON_UK]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Book Now and get up to 35% off!\",\"txt\":\"Our Seasonal Sale is here!\",\"vignette1\":\"Up to\",\"vignette2\":\"35%\",\"vignette3\":\"OFF*\",\"cta\":\"BOOK NOW\",\"mentions\":\"*See conditions\",\"photo\":\"ALL_OPE_SPE_APRIL.jpg\",\"logo\":\"logo.png\"},\"DE_RET_OP-SPE\":{\"country\":\"DE\",\"scenario\":\"RET_OP-SPE\",\"idDBM\":\"11712797|11712814|11712823|11713197|11713256\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=378&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.de/autovermietung-angebote/super-sale-fruehling?xtor=AD-2130-[OP_SPE_ON_DE]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Jetzt buchen und sparen\",\"txt\":\"Der Super-Sale ist da!\",\"vignette1\":\"Bis zu\",\"vignette2\":\"35%\",\"vignette3\":\"Rabatt*\",\"cta\":\"JETZT BUCHEN\",\"mentions\":\"*Siehe Bedingungen\",\"photo\":\"ALL_OPE_SPE_APRIL.jpg\",\"logo\":\"logo.png\"},\"FR_RET_OP-SPE\":{\"country\":\"FR\",\"scenario\":\"RET_OP-SPE\",\"idDBM\":\"11714546|11714553|11714558|11714571|11714790\",\"displayTag\":\"\",\"clickTag\":\"https://www.europcar.fr/promotions/offres-printemps-ete?xtor=AD-2150-[OP_SPE_ON_FR]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Réservez au meilleur prix !\",\"txt\":\"Cette super promo vous attend !\",\"vignette1\":\"Jusqu'à\",\"vignette2\":\"35%\",\"vignette3\":\"de remise*\",\"cta\":\"J'EN PROFITE\",\"mentions\":\"*Voir conditions\",\"photo\":\"ALL_OPE_SPE_APRIL.jpg\",\"logo\":\"logo.png\"},\"COM_RET_OP-SPE\":{\"country\":\"COM\",\"scenario\":\"RET_OP-SPE\",\"idDBM\":\"11902424|11703720|11710545|11710562|11710548|11703242\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=357&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.com/offers/spring-and-summer?xtor=AD-2100-[OP_SPE_ON_COM]-[STP1]-[IAB]-[RTB]-[USA]-[Banner]\",\"introStation\":\"Book now to get the best rates\",\"txt\":\"Super sales are here!\",\"vignette1\":\"Up to\",\"vignette2\":\"35%\",\"vignette3\":\"OFF*\",\"cta\":\"BOOK NOW\",\"mentions\":\"*See conditions\",\"photo\":\"ALL_OPE_SPE_APRIL.jpg\",\"logo\":\"logo.png\"},\"BE_RET_OP-SPE\":{\"country\":\"BE\",\"scenario\":\"RET_OP-SPE\",\"idDBM\":\"11701163|11701179|11702785|11702598|11702644|11702795\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=383&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.be/nl/aanbiedingen/lente-en-zomer-autohuur?xtor=AD-2120-[OP_SPE_ON_BE]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Boek nu aan de beste prijs!\",\"txt\":\"Geniet van deze exclusieve korting!\",\"vignette1\":\"Tot\",\"vignette2\":\"35%\",\"vignette3\":\"korting*\",\"cta\":\"RESERVEER NU\",\"mentions\":\"*zie voorwaarden\\n\\n\",\"photo\":\"ALL_OPE_SPE_APRIL.jpg\",\"logo\":\"logo.png\"},\"ES_RET_OP-SPE\":{\"country\":\"ES\",\"scenario\":\"RET_OP-SPE\",\"idDBM\":\"11713115|11713119|11713147|11713153|11714496\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=380&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.es/ofertas/global-primavera-2018?xtor=AD-2140-[OP_SPE_ON_ES]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Reserva ahora al mejor precio\",\"txt\":\"Súper Rebajas\",\"vignette1\":\"Hasta\",\"vignette2\":\"35%\",\"vignette3\":\"dto.*\",\"cta\":\"Reservar\",\"mentions\":\"*Ver condiciones\",\"photo\":\"ALL_OPE_SPE_APRIL.jpg\",\"logo\":\"logo.png\"},\"IT_RET_OP-SPE\":{\"country\":\"IT\",\"scenario\":\"RET_OP-SPE\",\"idDBM\":\"11714810|11714855|11717346|11717366|11716774\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=381&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.it/offerte/saldi-primavera-estate?xtor=AD-2160-[OP_SPE_ON_IT]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Prenota ora e risparmia\",\"txt\":\"Solo per te fino al 35% di sconto!\",\"vignette1\":\"Fino al\",\"vignette2\":\"35%\",\"vignette3\":\"di sconto*\",\"cta\":\"Prenota ora\",\"mentions\":\"*Visualizza i Termini e le Condizioni di noleggio\",\"photo\":\"ALL_OPE_SPE_APRIL.jpg\",\"logo\":\"logo.png\"},\"PT_RET_OP-SPE\":{\"country\":\"PT\",\"scenario\":\"RET_OP-SPE\",\"idDBM\":\"11718897|11718795|11718665|11718643|11718629\",\"displayTag\":\"https://europcar.commander1.com/v3/?tcs=382&chn=Display&src=RTB\",\"clickTag\":\"https://www.europcar.pt/promocoes/saldos-primavera-verao-2018?xtor=AD-2180-[OP_SPE_ON_PT]-[STP1]-[IAB]-[RTB]-[EUROPE]-[Banner]\",\"introStation\":\"Reserve já e poupe!\",\"txt\":\"Os Super Saldos chegaram!\",\"vignette1\":\"Até\",\"vignette2\":\"35%\",\"vignette3\":\"*desconto\",\"cta\":\"Reserve já!\",\"mentions\":\"*Ver condições\",\"photo\":\"ALL_OPE_SPE_APRIL.jpg\",\"logo\":\"logo.png\"}}"},"medias":{},"results":{"items":{"siteTrackers":null,"cookies":{},"params":{},"placement":{},"places":null,"random":null,"related":null,"target":null,"items":null},"userData":{"siteTrackers":null,"cookies":null,"dmp":null,"target":null}}};

(function() {

var _MAX_INT = 2147483647;
var _MAX_UNSIGNED_INT = 4294967295;


var _frameWindow = window;


var _nav;
var _ua;
try {
  _nav = window.navigator;
  _ua = _nav && _nav.userAgent;
} catch(e) {}


var _arrayProto = Array.prototype,
  _objectProto = Object.prototype,
  _slice = _arrayProto.slice,
  _concat = _arrayProto.concat,
  _push = _arrayProto.push,
  _toString = _objectProto.toString,
  _hasOwn = _objectProto.hasOwnProperty;


var _JSON;
var _Date;
var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t="";var n,r,i,s,o,u,a;var f=0;e=Base64._utf8_encode(e);while(f<e.length){n=e.charCodeAt(f++);r=e.charCodeAt(f++);i=e.charCodeAt(f++);s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a)}return t.replace(/\+/g, '-').replace(/\//g, '_').replace(/\=+$/, '')},_utf8_encode:function(e){e=e.replace(/rn/g,"n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r)}else if(r>127&&r<2048){t+=String.fromCharCode(r>>6|192);t+=String.fromCharCode(r&63|128)}else{t+=String.fromCharCode(r>>12|224);t+=String.fromCharCode(r>>6&63|128);t+=String.fromCharCode(r&63|128)}}return t}};


var _utils = {


_encode: function(str) {
  try {try {return encodeURIComponent(str);} catch(e) {return escape(str);}} catch(e) {} return str;
},
_decode: function(str) {
  try {try {return decodeURIComponent(str);} catch(e) {return unescape(str);}} catch(e) {} return str;
},


_isArray: Array.isArray || function(o) {
  return _toString.call(o) === '[object Array]';
},


_isPlainObject: function(o) {
  if (!o || _toString.call(o) !== '[object Object]' || o.nodeType || o == o.window) {return false;}
  try {if (o.constructor && !_hasOwn.call(o, 'constructor') && !_hasOwn.call(o.constructor.prototype, 'isPrototypeOf')) {return false;}} catch(e) {return false;}
  for (var key in o) {if (!_hasOwn.call(o, key)) {return false;}}
  return true;
},


_isEmptyObject: function(o) {
  for (var key in o) {
    return false;
  }
  return true;
},


_bind: function(fn, ctx, args) {
  return (function() {
    return fn.apply(ctx || this, _slice.call(args || []).concat(_slice.call(arguments)));
  });
},


extend: function() {
  var options, name, src, copy, copyIsArray, clone,
    target = arguments[0] || {},
    i = 1,
    length = arguments.length,
    deep = false;
  if (typeof target === 'boolean') {
    deep = target;
    target = arguments[i] || {};
    i++;
  }
  for ( ; i < length; i++) {
    if ((options = arguments[i]) != null) {
      for (name in options) {
        if (_hasOwn.call(options, name)) {
          src = target[name];
          copy = options[name];
          if (target === copy) {
            continue;
          }
          copyIsArray = false;
          if (deep && copy && (_utils._isPlainObject(copy) || (copyIsArray = _utils._isArray(copy)))) {
            clone = copyIsArray ? (src && _utils._isArray(src) ? src : []) : (src && _utils._isPlainObject(src) ? src : {});
            target[name] = _utils.extend(deep, clone, copy);
          } else if (copy !== undefined) {
            target[name] = copy;
          }
        }
      }
    }
  }
  return target;
},


each: function(obj, fn) {
  var i, len;
  if (obj != null) {
    if (_utils._isArray(obj)) {
      for (i = 0, len = obj.length; i < len; i++) {
        if (fn.call(obj[i], i, obj[i]) === false) {
          break;
        }
      }
    } else {
      for (i in obj) {
        if (_hasOwn.call(obj, i)) {
          if (fn.call(obj[i], i, obj[i]) === false) {
            break;
          }
        }
      }
    }
  }
  return obj;
},


map: function(obj, fn) {
  var res = [];
  _utils.each(obj, function(i) {
    var value = fn(obj[i], i);
    if (value != null) {
      res.push(value);
    }
  });
  return _concat.apply([], res);
},


toQueryString: function(params) {
  return _utils.map(params, function(value, key) {
    if (key != null && value != null) {
      return (_utils._encode(key) + '=' + _utils._encode(value));
    }
  }).join('&');
},


fromQueryString: function(str) {
  var params = {};
  var pairs = str.replace(/\+/g, ' ').split('&');
  _utils.each(pairs, function(i, value) {
    var pair = value.split('=');
    var key = _utils._decode(pair[0]);
    if (key) {
      params[key] = _utils._decode(pair[1] || '');
    }
  });
  return params;
},


addQueryParams: function(url, params) {
  url = url || '';
  if (!params) {
    return url;
  }
  if (_utils._isPlainObject(params)) {
    params = _utils.toQueryString(params);
  }
  var hashIndex = url.indexOf('#');
  var urlNoHash = hashIndex >= 0 ? url.slice(0, hashIndex) : url;
  var hash = hashIndex >= 0 ? url.slice(hashIndex) : '';
  return (urlNoHash + (urlNoHash.indexOf('?') >= 0 ? '&' : '?') + params + hash);
},


uniqueId: function() {
  return ('' + Math.random()).replace(/\D/g, '').slice(1, 11);
}

};

var _extend = _utils.extend;

debug = {
  _log: function(l, args) {
    try {
      var C;
      args = _slice.call(args || []);
      debug.queue.push([l, args, debug.stack.slice()]);
      (C = window.console) && C[l] && C[l].apply(C, ['[ADventori]'].concat(args));
    } catch(e) {}
  },
  log: function() {
    debug._log('log', arguments);
  },
  error: function() {
    debug._log('error', arguments);
  },
  queue: [],
  stack: []
};


ADventori = _frameWindow.ADventori = function(conf) {
  ADventori.ads = ADventori.ads || [];
  ADventori.ads.push(this);
  this.id = ADventori.fn.id = ADventori.id + '_' + ADventori.ads.length;
  ADventori._ads = ADventori._ads || {};
  ADventori._ads[this.id] = this;
  this.conf = ADventori.fn.conf = _extend(true, {}, conf || ADventori.conf);
  this.conf.processed = _extend(true, {}, ADventori.conf.processed);
  if (ADventori.Items) {
    this.conf.items = new ADventori.Items(this);
  }
  if (ADventori.Viewability) {
    this.conf.viewability = new ADventori.Viewability(this);
  }
  this.started = false;
};


_extend(ADventori, {

version: '4.0.0',

id: _utils.uniqueId(),

started: false

});


_extend(ADventori, {


data: _ADventori_data,


debug: debug,

utils: _utils,

fn: ADventori.prototype

});


_extend(ADventori, {

track: {

_guid: 1,
_trackedErrors: {},


disabledErrors: {},


toErrorString: function(e) {
  return (e && e.name ? (e.name + ': ' + (e.message || '')) : (e || '')) + '';
},


toQueryParams: function(trackerProps) {
  var params = {};
  _utils.each(trackerProps, function(key, value) {
    params['tk_' + key] = value;
  });
  return params;
},


toUrl: function(trackerProps, params) {
  var trackerUrl = ADventori.data.request.protocol + ADventori.data.request.hostname + ADventori.data.track.trackPrintUrl;
  trackerProps = _extend({}, ADventori.data.track.tracker, trackerProps, {
    "eventIndex": ADventori.track._guid++
  });
  return _utils.addQueryParams(trackerUrl, _extend({}, ADventori.track.toQueryParams(trackerProps), params));
},


toUrlRedirect: function(trackerProps, redirectUrl, params) {
  return ADventori.track.toUrl(_extend({}, trackerProps, {
    "urlClick": redirectUrl
  }), _extend({
    "redirect": true
  }, params));
},


toUrlRedirectStacked: function(trackerProps, redirectUrl, params) {
  return (
    ADventori.track.toUrl(trackerProps, params) +
    '&URL=' + redirectUrl
  );
},


toUrlShow: function(trackerType, trackerProps) {
  return trackerType ? ADventori.track.toUrl(_extend({
    "type": trackerType,
    "urlClick": null,
    "clickTagDomaineName": null,
    "affiliationCityId": null,
    "retailer_1": null,
    "retailer_2": null,
    "retailer_3": null,
    "retailer_4": _ua
  }, trackerProps)) :
  null;
},


toUrlClickRedirect: function(trackerType, trackerProps, redirectUrl) {
  return trackerType ? ADventori.track.toUrlRedirectStacked(_extend({
    "type": trackerType,
    "urlClick": null,
    "context": null,
    "clickTagDomaineName": null,
    "retailer_1": null,
    "retailer_2": null,
    "retailer_3": null,
    "retailer_4": null
  }, trackerProps), redirectUrl).replace(ADventori.data.track.trackPrintUrl, ADventori.data.track.trackClickUrl) :
  redirectUrl;
},


toUrlClickPixel: function(trackerType, trackerProps) {
  return trackerType ? ADventori.track.toUrl(_extend({
    "type": trackerType,
    "urlClick": null,
    "retailer_1": null,
    "retailer_2": null,
    "retailer_3": null,
    "retailer_4": _ua
  }, trackerProps)) :
  null;
},


toUrlError: function(trackerType, trackerProps) {
  return ADventori.track.toUrl(_extend({
    "type": trackerType,
    "context": ADventori.data.track.referer,
    "urlClick": null,
    "affiliationCityId": null,
    "retailer_1": null,
    "retailer_2": null,
    "retailer_3": null,
    "retailer_4": _ua
  }, trackerProps));
},


error: function(e, trackerType, trackerProps) {
  try {
    trackerType = trackerType || 'AdError';
    if (!ADventori.track.disabledErrors[trackerType]) {
      var message = ADventori.track.toErrorString(e);
      var trackedErrorKey = trackerType + '~' + message;
      if (!ADventori.track._trackedErrors[trackedErrorKey]) {
        ADventori.track._trackedErrors[trackedErrorKey] = true;
        var i = document.createElement('img');
        i.width = 1;
        i.height = 1;
        i.src = ADventori.track.toUrlError(trackerType, _extend({
          "urlClick": (message + '@' + debug.stack.join('@')).slice(0, 1000)
        }, trackerProps));
      }
      debug.error(trackerType, e);
    }
  } catch(_e) {}
},


call: function(fn, debugStack) {
  debug.stack.push(debugStack);
  var result = fn();
  debug.stack.pop();
  return result;
},


attempt: function(fn, debugStack, trackerType, trackerProps, onError) {
  var debugStackCopy = debug.stack.slice();
  try {
    return ADventori.track.call(fn, debugStack);
  } catch(e) {
    ADventori.track.error(e, trackerType, trackerProps);
    if (onError) {
      onError(e);
    }
  }
  debug.stack = debugStackCopy;
  return null;
},


setTimeout: function(fn, delay, debugStack, trackerType, trackerProps, onError) {
  return setTimeout(function() {
    ADventori.track.attempt(fn, debugStack, trackerType, trackerProps, onError);
  }, delay);
},


setInterval: function(fn, delay, debugStack, trackerType, trackerProps, onError) {
  var intervalID = setInterval(function() {
    ADventori.track.attempt(fn, debugStack, trackerType, trackerProps, function(e) {
      clearInterval(intervalID);
      if (onError) {
        onError(e);
      }
    });
  }, delay);
  return intervalID;
}

}

});


_extend(ADventori, {

assert: {



_checkArgs: function(cond, message, trackerType, trackerProps) {
  if (!cond) {
    ADventori.track.error(message, trackerType || 'AdErrorArgs', trackerProps);
  }
  return cond;
},


fail: function(message, trackerType, trackerProps) {
  ADventori.track.error(message, trackerType || 'AdErrorAssert', trackerProps);
},


isTrue: function(expr, message, trackerType, trackerProps) {
  if (!expr) {
    ADventori.assert.fail(message, trackerType, trackerProps);
  }
},


isNotNull: function(expr, message, trackerType, trackerProps) {
  ADventori.assert.isTrue(expr != null, message, trackerType, trackerProps);
},


isNotEmpty: function(expr, message, trackerType, trackerProps) {
  ADventori.assert.isTrue(expr && (expr.length > 0 || !_utils._isEmptyObject(expr)), message, trackerType, trackerProps);
},


isValidUrl: function(url, message, _secure) {
  if (!url) {
    ADventori.assert.fail(['NO_URL', ADventori.track.toErrorString(message), url].join(': '), 'AdErrorUrl');
  } else if (!/^https?:\/\//.test(url)) {
    ADventori.assert.fail(['NO_PROTOCOL', ADventori.track.toErrorString(message), url].join(': '), 'AdErrorUrl');
  } else if (_secure && ADventori.data.request.protocol == 'https://' && !/^https:\/\//.test(url)) {
    ADventori.assert.fail(['NO_SECURE_PROTOCOL', ADventori.track.toErrorString(message), url].join(': '), 'AdErrorUrl');
  }
},


isValidUrlSecure: function(url, message) {
  ADventori.assert.isValidUrl(url, message, true);
}

}

});


ADventori.track.attempt(function() {
  _Date = Date;
}, '_Date', 'AdErrorEnv');


ADventori.track.attempt(function() {
  "object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var r,n,o,f,u,p=gap,a=e[t];switch(a&&"object"==typeof a&&"function"==typeof a.toJSON&&(a=a.toJSON(t)),"function"==typeof rep&&(a=rep.call(e,t,a)),typeof a){case"string":return quote(a);case"number":return isFinite(a)?a+"":"null";case"boolean":case"null":return a+"";case"object":if(!a)return"null";if(gap+=indent,u=[],"[object Array]"===Object.prototype.toString.apply(a)){for(f=a.length,r=0;f>r;r+=1)u[r]=str(r,a)||"null";return o=0===u.length?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+p+"]":"["+u.join(",")+"]",gap=p,o}if(rep&&"object"==typeof rep)for(f=rep.length,r=0;f>r;r+=1)"string"==typeof rep[r]&&(n=rep[r],o=str(n,a),o&&u.push(quote(n)+(gap?": ":":")+o));else for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(o=str(n,a),o&&u.push(quote(n)+(gap?": ":":")+o));return o=0===u.length?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+p+"}":"{"+u.join(",")+"}",gap=p,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(t,e,r){var n;if(gap="",indent="","number"==typeof r)for(n=0;r>n;n+=1)indent+=" ";else"string"==typeof r&&(indent=r);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(t,e){var r,n,o=t[e];if(o&&"object"==typeof o)for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n=walk(o,r),void 0!==n?o[r]=n:delete o[r]);return reviver.call(t,e,o)}var j;if(text+="",cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();

  
  (function(stringify) {
    JSON.stringify = function() {
      if (typeof Array != 'undefined' && Array.prototype.toJSON) {
        var types = [Boolean, Number, String, Array, Date, Object], toJSONs = [], i;
        for (i = 0; i < types.length; i++) {toJSONs[i] = types[i].prototype.toJSON; toJSONs[i] && (delete types[i].prototype.toJSON);}
        (function(){function f(t){return 10>t?"0"+t:t}Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}})();
        var result = stringify.apply(this, arguments);
        for (i = 0; i < types.length; i++) {toJSONs[i] && (types[i].prototype.toJSON = toJSONs[i]);}
        return result;
      }
      return stringify.apply(this, arguments);
    };
  })(JSON.stringify);

  
  _JSON = JSON;
}, 'json2', 'AdErrorEnv');


ADventori.track.attempt(function() {
  var dataParamsErrors = ADventori.data.params._errors;
  if (dataParamsErrors) {
    ADventori.track.error(dataParamsErrors.join(','), 'AdErrorRedirectUrl');
  }
}, 'dataParamsErrors', 'AdErrorEnv');


ADventori.track.attempt(function() {
  var campaignData = {};
  _utils.each(ADventori.data.campaignData, function(key, value) {
    campaignData[key] = _JSON.parse(value);
  });
  ADventori.data.campaignData = campaignData;
}, 'campaignData', 'AdErrorEnv');


_extend(ADventori, {

collect: {

arrays: {

toObject: function(arr, fn) {
  if (!ADventori.assert._checkArgs(arr && _utils._isArray(arr), {name: 'collect.arrays.toObject', message: 'NO_ARRAY_INPUT'}) ||
      !ADventori.assert._checkArgs(typeof fn == 'function', {name: 'collect.arrays.toObject', message: 'NO_FUNCTION_INPUT'})) {
    return {};
  }
  var obj = {};
  _utils.each(arr, function(i, val) {
    var entry = fn(val);
    if (entry != null && entry.length > 0) {
      obj[entry[0]] = entry[1];
    }
  });
  return obj;
},

deduplicateBy: function(arr, fn) {
  if (!ADventori.assert._checkArgs(arr && _utils._isArray(arr), {name: 'collect.arrays.deduplicateBy', message: 'NO_ARRAY_INPUT'}) ||
      !ADventori.assert._checkArgs(typeof fn == 'function', {name: 'collect.arrays.deduplicateBy', message: 'NO_FUNCTION_INPUT'})) {
    return [];
  }
  var keys = {};
  return _utils.map(arr, function(val) {
    var key = fn(val);
    if (key != null && !keys[key]) {
      keys[key] = true;
      return val;
    }
  });
}

},

objects: {

toArray: function(obj, fn) {
  if (!ADventori.assert._checkArgs(obj && _utils._isPlainObject(obj), {name: 'collect.objects.toArray', message: 'NO_OBJECT_INPUT'}) ||
      !ADventori.assert._checkArgs(typeof fn == 'function', {name: 'collect.objects.toArray', message: 'NO_FUNCTION_INPUT'})) {
    return [];
  }
  return _utils.map(obj, function(val, key) {
    return fn(key, val);
  });
},

size: function(obj) {
  if (!ADventori.assert._checkArgs(obj && _utils._isPlainObject(obj), {name: 'collect.objects.size', message: 'NO_OBJECT_INPUT'})) {
    return 0;
  }
  var i = 0;
  for (var key in obj) {
    i++;
  }
  return i;
}

}

}

});


_extend(ADventori, {

text: {

_latinMap: {"A":"ÀÁÂÃÄÅ","AE":"Æ","C":"Ç","E":"ÈÉÊË","I":"ÌÍÎÏ","N":"Ñ","O":"ÒÓÔÕÖØ","OE":"Œ","S":"Š","SS":"ẞ","U":"ÙÚÛÜ","Y":"ÝŸ","Z":"Ž","a":"àáâãäå","ae":"æ","c":"ç","e":"èéêë","i":"ìíîï","n":"ñ","o":"òóôõöø","oe":"œ","s":"š","ss":"ß","u":"ùúûü","y":"ýÿ","z":"ž"},

_buildReverseLatinMap: function() {
  var reverseLatinMap = {};
  var latinMap = ADventori.text._latinMap;
  for (var latinChar in latinMap) {
    var accentChars = latinMap[latinChar];
    for (var i = 0; i < accentChars.length; i++) {
      reverseLatinMap[accentChars.charAt(i)] = latinChar;
    }
  }
  return reverseLatinMap;
},

latinize: function(str) {
  if (!ADventori.assert._checkArgs(typeof str == 'string', {name: 'text.latinize', message: 'NO_STRING_INPUT'})) {
    return '';
  }
  var reverseLatinMap = ADventori.text._reverseLatinMap = ADventori.text._reverseLatinMap || ADventori.text._buildReverseLatinMap();
  return str.replace(/[^\w\s-]/g, function(a) {
    return reverseLatinMap[a] || a;
  });
},

capitalize: function(str) {
  if (!ADventori.assert._checkArgs(typeof str == 'string', {name: 'text.capitalize', message: 'NO_STRING_INPUT'})) {
    return '';
  }
  return str.charAt(0).toUpperCase() + str.slice(1);
},

capitalizeWords: function(str) {
  if (!ADventori.assert._checkArgs(typeof str == 'string', {name: 'text.capitalizeWords', message: 'NO_STRING_INPUT'})) {
    return '';
  }
  return str.replace(/[^\s-]+/g, ADventori.text.capitalize);
},

trim: function(str) {
  if (!ADventori.assert._checkArgs(typeof str == 'string', {name: 'text.trim', message: 'NO_STRING_INPUT'})) {
    return '';
  }
  return str.replace(/^[\s\xa0]+|[\s\xa0]+$/g, '');
}

}

});


_extend(ADventori, {

number: {


defaultLocaleOptions: {
  minIntegerDigits: 1,
  minFractionDigits: 0,
  maxFractionDigits: 2,
  thousandSeparator: ' ',
  decimalSeparator: ','
},


parse: function(str, opts) {
  if (!ADventori.assert._checkArgs(typeof str == 'string', {name: 'number.parse', message: 'NO_STRING_INPUT'})) {
    return NaN;
  }
  opts = _extend({}, ADventori.number.defaultLocaleOptions, opts);
  str = opts.thousandSeparator ? str.split(opts.thousandSeparator).join('') : str;
  str = opts.decimalSeparator ? str.replace(opts.decimalSeparator, '.') : str;
  return parseFloat(str);
},


format: function(num, opts) {
  if (!ADventori.assert._checkArgs(typeof num == 'number' || typeof num == 'string', {name: 'number.format', message: 'NO_NUMBER_OR_STRING_INPUT'})) {
    return '';
  }
  num = num + '';
  if (!/^\-?\d+(\.\d+)?$/.test(num)) {
    return '';
  }
  opts = _extend({}, ADventori.number.defaultLocaleOptions, opts);
  var numParts = num.split('.');
  var intPart = numParts[0] || '';
  var fracPart = numParts[1] || '';
  var sign = intPart.charAt(0) == '-' ? '-' : '';
  intPart = sign ? intPart.slice(1) : intPart;
  fracPart = fracPart.length < +opts.minFractionDigits ? fracPart + new Array(+opts.minFractionDigits - fracPart.length + 1).join('0') :
    fracPart.length > +opts.maxFractionDigits ?
      +opts.maxFractionDigits > 0 ? fracPart.slice(0, +opts.maxFractionDigits - 1) + (+fracPart.charAt(+opts.maxFractionDigits - 1) + (+fracPart.charAt(+opts.maxFractionDigits) >= 5 ? 1 : 0)) :
        (intPart = intPart.slice(0, intPart.length - 1) + (+intPart.charAt(intPart.length - 1) + (+fracPart.charAt(0) >= 5 ? 1 : 0)), '') :
    fracPart;
  intPart = intPart.length < +opts.minIntegerDigits ? new Array(+opts.minIntegerDigits - intPart.length + 1).join('0') + intPart : intPart;
  intPart = opts.thousandSeparator ? intPart.replace(/\B(?=(\d{3})+(?!\d))/g, opts.thousandSeparator) : intPart;
  return sign + (fracPart ? [intPart, fracPart].join(opts.decimalSeparator || '.') : intPart);
}

}

});


_extend(ADventori, {

date: {


now: function() {
  return new _Date(ADventori.data.track.timestamp);
},


parse: function(str) {
  if (!ADventori.assert._checkArgs(typeof str == 'string', {name: 'date.parse', message: 'NO_STRING_INPUT'})) {
    return new _Date(NaN);
  }
  var struct, numKeys = [1, 4, 5, 6, 7, 10, 11];
  //              1 YYYY                2 MM       3 DD           4 HH    5 mm       6 ss        7 msec        8 Z 9 ±    10 tzHH    11 tzmm
  if (!(struct = /^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/.exec(str))) {
    return new _Date(NaN);
  }
  for (var i = 0, k; (k = numKeys[i]); ++i) {
    struct[k] = +struct[k] || 0;
  }
  struct[2] = (+struct[2] || 1) - 1;
  struct[3] = +struct[3] || 1;
  if (!struct[8] && !struct[9]) {
    return new _Date(struct[1], struct[2], struct[3], struct[4], struct[5], struct[6], struct[7]);
  } else {
    var mOff = struct[8] !== 'Z' && struct[9] ? (struct[9] === '+' ? -1 : 1) * (struct[10] * 60 + struct[11]) : 0;
    return new _Date(_Date.UTC(struct[1], struct[2], struct[3], struct[4], struct[5] + mOff, struct[6], struct[7]));
  }
}

}

});


_extend(ADventori, {

geo: {

earthRadius: 6378700,

_toRad: function(deg) {
  return (+deg) * Math.PI / 180;
},


distance: function(latLng1, latLng2) {
  if (!ADventori.assert._checkArgs(latLng1 != null && latLng1.lat != null && latLng1.lng != null && latLng2 != null && latLng2.lat != null && latLng2.lng != null, {name: 'geo.distance', message: 'NO_LATLNG_INPUT'})) {
    return NaN;
  }
  var _toRad = ADventori.geo._toRad;
  var lat1 = _toRad(latLng1.lat);
  var lng1 = _toRad(latLng1.lng);
  var lat2 = _toRad(latLng2.lat);
  var lng2 = _toRad(latLng2.lng);
  var x = (lng2 - lng1) * Math.cos((lat1 + lat2) / 2);
  var y = (lat2 - lat1);
  return Math.sqrt(x * x + y * y) * ADventori.geo.earthRadius;
}

}

});


_extend(ADventori, {

proxy: {


toResizedImageUrl: function(imageUrl, sizeStr, extension) {
  if (!ADventori.assert._checkArgs(typeof imageUrl == 'string' && typeof sizeStr == 'string' && typeof extension == 'string' && imageUrl && sizeStr && extension, {name: 'proxy.toResizedImageUrl', message: 'NO_STRING_INPUT'})) {
    return '';
  }
  if (!/^\/i\/.*\/original\//.test(imageUrl)) {
    return imageUrl;
  }
  return imageUrl.replace('/original/', '/' + sizeStr + '/') + '.' + extension;
}

}

});


_extend(ADventori, {

rand: {


getInt: function(min, max, _seed) {
  ADventori.assert._checkArgs(min != null && max != null, {name: 'rand.getInt', message: 'NO_INPUT'});
  _seed = _seed != null ? _seed : Math.random();
  min = Math.ceil(+min);
  max = Math.floor(+max);
  return Math.floor(_seed * (max - min + 1)) + min;
},


getFloat: function(min, max, _seed) {
  ADventori.assert._checkArgs(min != null && max != null, {name: 'rand.getFloat', message: 'NO_INPUT'});
  _seed = _seed != null ? _seed : Math.random();
  min = (+min);
  max = (+max);
  return (_seed * (max - min)) + min;
},


getElement: function(seq, _seed) {
  ADventori.assert._checkArgs(seq != null, {name: 'rand.getElement', message: 'NO_INPUT'});
  var key, keys;
  keys = _utils.map(seq, function(value, key) {
    return key;
  });
  key = keys[ADventori.rand.getInt(0, keys.length - 1, _seed)];
  ADventori.assert._checkArgs(key != null, {name: 'rand.getElement', message: 'NO_RESULT_KEY'});
  return seq[key];
},


getWeightedElement: function(seq, weights, _seed) {
  ADventori.assert._checkArgs(seq != null && weights != null, {name: 'rand.getWeightedElement', message: 'NO_INPUT'});
  var key, keys, weightKeys, cumWeight, cumWeights, cumIndex, i;
  keys = _utils.map(seq, function(value, key) {
    return key;
  });
  weightKeys = _utils.map(weights, function(value, key) {
    return key;
  });
  ADventori.assert._checkArgs(keys.length === weightKeys.length, {name: 'rand.getWeightedElement', message: ['INVALID_WEIGHTS', keys.length, weightKeys.length].join(',')});
  cumWeight = 0;
  cumWeights = _utils.map(weights, function(value) {
    return (cumWeight += (+value));
  });
  cumIndex = ADventori.rand.getFloat(0, cumWeight, _seed);
  for (i = 0; i < cumWeights.length && cumWeights[i] < cumIndex; i++) {}
  key = weightKeys[i];
  ADventori.assert._checkArgs(key != null, {name: 'rand.getWeightedElement', message: 'NO_RESULT_KEY'});
  return seq[key];
},


sample: function(seq, k) {
  ADventori.assert._checkArgs(seq != null && k != null, {name: 'rand.sample', message: 'NO_INPUT'});
  var keys = _utils.map(seq, function(value, key) {
    return key;
  });
  return _utils.map(ADventori.rand.shuffle(keys).slice(0, k), function(keyVal) {
    return [seq[keyVal]];
  });
},


shuffle: function(o) {
  if (!ADventori.assert._checkArgs(o != null && _utils._isArray(o), {name: 'rand.shuffle', message: 'NO_ARRAY_INPUT'})) {
    return [];
  }
  o = o.slice();
  for (var j, x, i = o.length; i; j = Math.floor(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
  return o;
}

}

});


_extend(ADventori, {

pools: {

_defaultKey: '_default',

seed: ADventori.data.track.uiHash,


_computeSeed: function(key) {
  ADventori.assert._checkArgs(key && typeof key == 'string', {name: 'pools._computeSeed', message: 'NO_VARIATION_INPUT'});
  key = (key != null ? (key + '') : '');
  return (ADventori.hash.murmur3_32(key || ADventori.pools._defaultKey, +ADventori.pools.seed) / (_MAX_UNSIGNED_INT + 1));
},


getInt: function(min, max, key) {
  return ADventori.rand.getInt(min, max, ADventori.pools._computeSeed(key));
},


getFloat: function(min, max, key) {
  return ADventori.rand.getFloat(min, max, ADventori.pools._computeSeed(key));
},


getElement: function(seq, key) {
  return ADventori.rand.getElement(seq, ADventori.pools._computeSeed(key));
},


getWeightedElement: function(seq, weights, key) {
  return ADventori.rand.getWeightedElement(seq, weights, ADventori.pools._computeSeed(key));
}

}

});


_extend(ADventori, {

hash: {


murmur3_32: function(a,b){var c,d,e,f,g,i,k,l;for(c=3&a.length,d=a.length-c,e=b,g=3432918353,i=461845907,l=0;l<d;)k=255&a.charCodeAt(l)|(255&a.charCodeAt(++l))<<8|(255&a.charCodeAt(++l))<<16|(255&a.charCodeAt(++l))<<24,++l,k=(65535&k)*g+(((k>>>16)*g&65535)<<16)&4294967295,k=k<<15|k>>>17,k=(65535&k)*i+(((k>>>16)*i&65535)<<16)&4294967295,e^=k,e=e<<13|e>>>19,f=5*(65535&e)+((5*(e>>>16)&65535)<<16)&4294967295,e=(65535&f)+27492+(((f>>>16)+58964&65535)<<16);switch(k=0,c){case 3:k^=(255&a.charCodeAt(l+2))<<16;case 2:k^=(255&a.charCodeAt(l+1))<<8;case 1:k^=255&a.charCodeAt(l),k=(65535&k)*g+(((k>>>16)*g&65535)<<16)&4294967295,k=k<<15|k>>>17,k=(65535&k)*i+(((k>>>16)*i&65535)<<16)&4294967295,e^=k}return e^=a.length,e^=e>>>16,e=2246822507*(65535&e)+((2246822507*(e>>>16)&65535)<<16)&4294967295,e^=e>>>13,e=3266489909*(65535&e)+((3266489909*(e>>>16)&65535)<<16)&4294967295,e^=e>>>16,e>>>0}

}

});


_extend(ADventori, {

env: {

browser: (function() {
  var name = (
    /Edge|EdgA|EdgiOS/i.test(_ua) ? 'edge' :
    /MSIE|Trident/i.test(_ua) ? 'ie' :
    /Firefox|FxiOS/i.test(_ua) ? 'firefox' :
    /Opera|OPR|OPiOS/i.test(_ua) ? 'opera' :
    /Chrome|CriOS/i.test(_ua) ? 'chrome' :
    /Safari/i.test(_ua) ? 'safari' :
    'other'
  );
  var version = (
    name == 'ie' ? parseFloat((/(MSIE +|Trident.*rv[ :] *)([\d\.]+)/i.exec(_ua) || [])[2]) :
    null
  );
  return {
    name: name,
    version: version
  };
})(),

os: {
  name: (
    /windows (ce|phone)|XBLWP7/i.test(_ua) ? 'windowsPhone' :
    /iphone|ipad|ipod/i.test(_ua) ? 'ios' :
    /android/i.test(_ua) ? 'android' :
    /blackberry|playbook|bb\d+|rim[0-9]/i.test(_ua) ? 'blackberry' :
    /windows|win32/i.test(_ua) ? 'windows' :
    /macintosh|mac os/i.test(_ua) ? 'mac' :
    /linux/i.test(_ua) ? 'linux' :
    'other'
  )
},

device: {
  type: (
    /tablet|ipad|android(?!.+mobi)/i.test(_ua) ? 'tablet' :
    /mobi|mini/i.test(_ua) ? 'mobile' :
    /tv/i.test(_ua) ? 'tv' :
    'desktop'
  )
},

flash: {
  enabled: true,
  _buildVersion: function() {
    return ADventori.track.attempt(function() {
      var version;
      var d = function(c) {(c = c.match(/[\d]+/g)) && (version = c.join('.'))};
      if (_nav && _nav.plugins && _nav.plugins.length) {
        var e = _nav.plugins['Shockwave Flash'];
        (e && e.description && d(e.description));
      } else if (_nav && _nav.mimeTypes && _nav.mimeTypes.length) {
        var f = _nav.mimeTypes['application/x-shockwave-flash'];
        (f && f.enabledPlugin && d(f.enabledPlugin.description));
      } else if (window.ActiveXObject) {
        try {d(new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version'));}catch(h){}
      }
      return version;
    }, 'flash._buildVersion', 'AdErrorEnv') || '0.0.0';
  },
  getVersion: function() {
    if (!ADventori.env.flash.enabled) {
      return '0.0.0';
    }
    var version = ADventori.env.flash._version = ADventori.env.flash._version || ADventori.env.flash._buildVersion();
    return version;
  },
  hasVersion: function(v) {
    var pv = ADventori.env.flash.getVersion();
    pv = pv.split('.');
    v = v.split('.');
    pv = [parseInt(pv[0], 10), parseInt(pv[1], 10) || 0, parseInt(pv[2], 10) || 0];
    v = [parseInt(v[0], 10), parseInt(v[1], 10) || 0, parseInt(v[2], 10) || 0];
    return (pv[0] > v[0] || (pv[0] == v[0] && pv[1] > v[1]) || (pv[0] == v[0] && pv[1] == v[1] && pv[2] >= v[2]));
  }
}

}

});


_extend(ADventori, {

doc: {

url: {
  get: function(win, n) {
    if (typeof win === 'string') {n = win; win = window;}
    var params = ADventori.track.attempt(function() {
      return _utils.fromQueryString(win.location.search.slice(1));
    }, 'doc.url', 'AdErrorEnv') || {};
    return params[n];
  }
}

}

});


_extend(ADventori, {

dom: {

_guid: 1,
_guidKey: 'ADventori_dom_guid',
_listeners: {},
_ready: false,


addEventListener: function(el, type, fn) {
  try {
    var guidKey = ADventori.dom._guidKey;
    el[guidKey] = el[guidKey] || ADventori.dom._guid++;
    fn[guidKey] = fn[guidKey] || ADventori.dom._guid++;
    var listenerId = [type, el[guidKey], fn[guidKey]].join('_');
    if (!ADventori.dom._listeners[listenerId]) {
      var eventListener = ADventori.dom._listeners[listenerId] = function(e) {
        ADventori.track.attempt(_utils._bind(fn, el, [e || window.event].concat(_slice.call(arguments, 1))), 'event_' + type);
      };
      if (el.addEventListener) {
        el.addEventListener(type, eventListener, false);
      } else if (el.attachEvent) {
        el.attachEvent('on' + type, eventListener);
      }
    }
  } catch(e) {
    ADventori.track.error(e, 'AdErrorDom');
  }
},

removeEventListener: function(el, type, fn) {
  try {
    var guidKey = ADventori.dom._guidKey;
    var listenerId = [type, el[guidKey], fn[guidKey]].join('_');
    var eventListener = ADventori.dom._listeners[listenerId];
    if (eventListener) {
      if (el.removeEventListener) {
        el.removeEventListener(type, eventListener, false);
      } else if (el.detachEvent) {
        el.detachEvent('on' + type, eventListener);
      }
      ADventori.dom._listeners[listenerId] = null;
    }
  } catch(e) {
    ADventori.track.error(e, 'AdErrorDom');
  }
},


getDocument: function(el) {
  try {
    return el.ownerDocument;
  } catch(e) {
    ADventori.track.error(e, 'AdErrorDom');
  }
},


getWindow: function(doc) {
  try {
    return (doc.defaultView || doc.parentWindow);
  } catch(e) {
    ADventori.track.error(e, 'AdErrorDom');
  }
},


createElement: function(doc, tagName, attrs) {
  if (typeof doc === 'string') {attrs = tagName; tagName = doc; doc = document;}
  try {
    var el = doc.createElement(tagName);
    _utils.each(attrs, function(key, value) {
      if (value != null) {
        if (key == 'on') {
          _utils.each(value, function(key, value) {
            ADventori.dom.addEventListener(el, key, value);
          });
        } else if (key == 'style') {
          if (_utils._isPlainObject(value)) {
            _utils.each(value, function(key, value) {
              el.style[key] = value;
            });
          } else {
            el.style.cssText = value;
          }
        } else if (key == 'class') {
          el.className = value;
        } else {
          el.setAttribute(key, value);
        }
      }
    });
    return el;
  } catch(e) {
    ADventori.track.error(e, 'AdErrorDom');
  }
},


createHtml: function(tagName, attrs, innerHtml) {
  try {
    var html = [];
    html.push('<' + tagName);
    _utils.each(attrs, function(key, value) {
      html.push(' ' + key + (value != null ? ('="' + (value + '').replace(/[&<>"'`]/g, function(chr) {
        return ({
          '&': '&amp;',
          '<': '&lt;',
          '>': '&gt;',
          '"': '&quot;',
          "'": '&#39;',
          '`': '&#96;'
        })[chr];
      }) + '"') : ''));
    });
    html.push(innerHtml !== null ? ('>' + (innerHtml != undefined ? innerHtml : '') + '<' + '/' + tagName + '>') : (' />'));
    return html.join('');
  } catch(e) {
    ADventori.track.error(e, 'AdErrorDom');
  }
},



createSwf: function(doc, url, params, attrs) {
  if (typeof doc === 'string') {attrs = params; params = url; url = doc; doc = document;}
  ADventori.assert.isValidUrlSecure(url);
  try {
    var isActiveX = window.ActiveXObject;
    var swfParams = _extend(isActiveX ? {movie: url} : {}, params);
    var swfParamsHtml = _utils.map(swfParams, function(value, key) {
      return ADventori.dom.createHtml('param', {name: key, value: value}, null);
    }).join('');
    var swfAttrs = _extend({
      type: 'application/x-shockwave-flash'
    }, isActiveX ? {} : {
      data: url
    }, attrs);
    var swfObjectHtml = ADventori.dom.createHtml('object', swfAttrs, swfParamsHtml);
    var swfObjectDiv = doc.createElement('div');
    swfObjectDiv.innerHTML = swfObjectHtml;
    return swfObjectDiv.firstChild;
  } catch(e) {
    ADventori.track.error(e, 'AdErrorDom');
  }
},


writeHtml: function(doc, code) {
  if (typeof doc === 'string') {code = doc; doc = document;}
  if (!ADventori.assert._checkArgs(!ADventori.dom._ready, {name: 'dom.writeHtml', message: ['WRITE_ASYNC', doc && 'doc'].join(',')}, 'AdErrorDom')) {
    return;
  }
  ADventori.track.attempt(function() {
    doc.write(code);
  }, 'dom.writeHtml', 'AdErrorDom');
},


writeScript: function(doc, url, attrs) {
  if (typeof doc === 'string') {attrs = url; url = doc; doc = document;}
  ADventori.assert.isValidUrlSecure(url);
  try {
    ADventori.dom.writeHtml(doc, ADventori.dom.createHtml('script', _extend({
      charset: 'utf-8',
      src: url
    }, attrs)));
  } catch(e) {
    ADventori.track.error(e, 'AdErrorDom');
  }
},


getScript: function(doc, url, attrs) {
  if (typeof doc === 'string') {attrs = url; url = doc; doc = document;}
  ADventori.assert.isValidUrlSecure(url);
  try {
    var debugStackCopy = debug.stack.slice();
    var head = doc.head || doc.getElementsByTagName('head')[0] || doc.documentElement,
      sc = doc.getElementsByTagName('script')[0],
      s = _extend(doc.createElement('script'), {
        onload: function() {
          debug.queue.push(['loadScript', arguments, debugStackCopy]);
        },
        onerror: function() {
          debug.queue.push(['errorScript', arguments, debugStackCopy]);
        },
        async: true,
        charset: 'utf-8',
        src: url
      }, attrs);
    if (sc) {
      sc.parentNode.insertBefore(s, sc);
    } else if (head) {
      head.insertBefore(s, head.firstChild);
    } else {
      throw ({name: 'dom.getScript', message: [doc && 'doc', head && 'head', sc && 'sc', s && 's', url].join(',')});
    }
  } catch(e) {
    ADventori.track.error(e, 'AdErrorDom');
  }
},


evalScript: function(doc, code, attrs) {
  if (typeof doc === 'string') {attrs = code; code = doc; doc = document;}
  try {
    var head = doc.head || doc.getElementsByTagName('head')[0] || doc.documentElement,
      sc = doc.getElementsByTagName('script')[0],
      s = _extend(doc.createElement('script'), attrs);
    try {
      s.appendChild(doc.createTextNode(code));
    } catch(e) {
      s.text = code;
    }
    if (sc) {
      sc.parentNode.insertBefore(s, sc);
    } else if (head) {
      head.insertBefore(s, head.firstChild);
    } else {
      throw ({name: 'dom.evalScript', message: [doc && 'doc', head && 'head', sc && 'sc', s && 's', typeof code].join(',')});
    }
  } catch(e) {
    ADventori.track.error(e, 'AdErrorDom');
  }
},


evalStyle: function(doc, code, attrs) {
  if (typeof doc === 'string') {attrs = code; code = doc; doc = document;}
  try {
    var head = doc.head || doc.getElementsByTagName('head')[0] || doc.documentElement,
      s = _extend(doc.createElement('style'), {type: 'text/css'}, attrs);
    try {
      s.appendChild(doc.createTextNode(code));
    } catch(e) {
      s.styleSheet.cssText = code;
    }
    if (head) {
      head.insertBefore(s, head.firstChild);
    } else {
      throw ({name: 'dom.evalStyle', message: [doc && 'doc', head && 'head', s && 's', typeof code].join(',')});
    }
  } catch(e) {
    ADventori.track.error(e, 'AdErrorDom');
  }
},


firePixel: function(url, attrs) {
  ADventori.assert.isValidUrlSecure(url);
  try {
    var debugStackCopy = debug.stack.slice();
    return _extend(document.createElement('img'), {
      onload: function() {
        debug.queue.push(['loadPixel', arguments, debugStackCopy]);
      },
      onerror: function() {
        debug.queue.push(['errorPixel', arguments, debugStackCopy]);
      },
      width: 1,
      height: 1,
      src: url
    }, attrs);
  } catch(e) {
    ADventori.track.error(e, 'AdErrorDom');
  }
},


open: function(url) {
  ADventori.assert.isValidUrl(url);
  if (!url) {
    return 'no_url';
  }
  try {
    var win = window;
    var useWindowOpen = typeof win.open == 'function' || !(win.constructor && win.constructor.prototype && typeof win.constructor.prototype.open == 'function');
    var newWin = useWindowOpen ? win.open(url, '_blank') : win.constructor.prototype.open.apply(win, [url, '_blank']);
    if (newWin) {
      try {
        newWin.opener = null;
      } catch(e) {}
    } else {
      win.top.location.href = url;
    }
    return (newWin != null && newWin == newWin.window ? 'window' : (newWin + ''));
  } catch(e) {
    ADventori.track.error(e, 'AdErrorOpen');
    return 'error';
  }
},



onReady: function(win, fn) {
  if (typeof win === 'function') {fn = win; win = window;}
  try {
    var doc = win.document;
    var readyFn = function() {
      if (!doc.body) {
        ADventori.track.setTimeout(readyFn, 0, 'dom.ready');
        return;
      }
      ADventori.dom._ready = true;
      fn();
    };
    var completed = function(e) {
      if (doc.addEventListener || e.type === 'load' || doc.readyState === 'complete') {
        ADventori.dom.removeEventListener(doc, doc.addEventListener ? 'DOMContentLoaded' : 'readystatechange', completed);
        ADventori.dom.removeEventListener(win, 'load', completed);
        readyFn();
      }
    };
    if (doc.readyState === 'complete') {
      ADventori.track.setTimeout(readyFn, 0, 'dom.ready');
    } else {
      ADventori.dom.addEventListener(doc, doc.addEventListener ? 'DOMContentLoaded' : 'readystatechange', completed);
      ADventori.dom.addEventListener(win, 'load', completed);
    }
  } catch(e) {
    ADventori.track.error(e, 'AdErrorDom');
  }
},


onWrite: function(win, fn) {
  if (typeof win === 'function') {fn = win; win = window;}
  try {
    var doc = win.document;
    var fnId = 'ADventori_fn_' + _utils.uniqueId();
    win[fnId] = fn;
    ADventori.dom.writeHtml(doc, ADventori.dom.createHtml('script', {}, 'window["' + fnId + '"](); window["' + fnId + '"] = null;'));
  } catch(e) {
    ADventori.track.error(e, 'AdErrorDom');
  }
}

}

});


_extend(ADventori, {

ext: {


exec: function(data) {
  return ADventori.track.attempt(function() {
    var ad = ADventori._ads[data.id];
    if (!ad) {
      // ignore noise (calls from creas created by other wrappers)
      return;
    }
    return ad.exec(data.cmd, _slice.call(data.args || []));
  }, ['ext.exec', data && data.cmd].join('_'), 'AdErrorExec');
},


execCrea: function(data) {
  return ADventori.track.attempt(function() {
    var ad = ADventori._ads[data.id];
    if (!ad) {
      throw ({name: 'ext.execCrea', message: ['INVALID_ID', data && data.id].join(',')});
    }
    var conf = ad.conf;
    var el = conf.processed.dom['adElement'];
    if (!el) {
      throw ({name: 'ext.execCrea', message: ['NO_ELEMENT'].join(',')});
    }
    if (conf.processed['displayFormat'] == 'HTML') {
      var _contentWindow;
      try {
        _contentWindow = el.contentWindow;
      } catch(e) {}
      if (_contentWindow) {
        return ADventori.ext.sendMessage(_contentWindow, data);
      }
    }
    return false;
  }, ['ext.execCrea', data && data.cmd].join('_'), 'AdErrorExec') || false;
},


receiveMessage: function(e) {
  ADventori.track.attempt(function() {
    var protocol = 'ADventori:';
    if (!(typeof e.data === 'string' && e.data.slice(0, protocol.length) === protocol)) {
      // ignore noise (messages not coming from ADventori)
      return;
    }
    var data = _JSON.parse(e.data.slice(protocol.length));
    ADventori.ext.exec(data);
  }, ['ext.receiveMessage', e && e.origin].join('_'), 'AdErrorMessage');
},


sendMessage: function(win, data) {
  return ADventori.track.attempt(function() {
    var protocol = 'ADventori:';
    win.postMessage(protocol + _JSON.stringify({
      id: data.id,
      cmd: data.cmd,
      args: _slice.call(data.args || [])
    }), '*');
    return true;
  }, ['ext.sendMessage', data && data.cmd].join('_'), 'AdErrorMessage') || false;
},


commands: {
  "log": function() {
    return debug.log.apply(null, arguments);
  },
  "error": function() {
    return ADventori.track.error.apply(null, arguments);
  },
  "open": function() {
    return ADventori.dom.open.apply(null, arguments);
  },
  "click": function() {
    var args = [this.conf].concat(_slice.call(arguments));
    this.attempt('trackClick', args);
    this.attempt('fireClickTags', args);
    this.attempt('onClick', args, 'AdErrorConf');
  },
  "creaInitData": function() {
    var args = [this.conf].concat(_slice.call(arguments));
    this.attempt('trackCreaInitData', args);
    this.attempt('onCreaInitData', args, 'AdErrorConf');
  },
  "creaReady": function() {
    var args = [this.conf].concat(_slice.call(arguments));
    this.attempt('trackCreaReady', args);
    this.attempt('onCreaReady', args, 'AdErrorConf');
  },
  "creaLoad": function() {
    var args = [this.conf].concat(_slice.call(arguments));
    this.attempt('trackCreaLoad', args);
    this.attempt('triggerVisibleStateEvent', args);
    this.attempt('onCreaLoad', args, 'AdErrorConf');
  }
}

}

});


_extend(ADventori, {

conf: {
  "size": ADventori.data.size,
  "campaign": ADventori.data.campaign['campaignId'],
  "placement": ADventori.data.placement['placementId'],
  "displayFormat": ADventori.data.placement['displayFormat'],
  "displayTag": ADventori.data.placement['displayTag'],
  "clickTag": ADventori.data.placement['clickTag'],
  "clickTagEncoded": ADventori.data.placement.adServer.clickRedirectionEncoded,
  "clickTagEnd": ADventori.data.placement.adServer.clickTagEnd,
  "creaUrl": ADventori.data.placement['adUrl'],
  "passbackUrl": ADventori.data.placement['passbackUrl'],
  "backup": {
    "creaUrl": ADventori.data.placement['imgUrl']
  },
  "displayCustom": false,
  "displayPassback": false,
  "displayBackup": false,
  "defaultScenario": {
    "_default": 'DEFAULT',
    "backup": 'BACKUP_DEFAULT',
    "passback": 'PASSBACK_DEFAULT',
    "custom": 'CUSTOM_DEFAULT'
  },
  "paramScenario": {
    "backup": 'BACKUP_PARAM',
    "passback": 'PASSBACK_PARAM'
  },
  "scenario": null,
  "statData": {},
  "creaData": {},
  "items_v4": {
    "statItems": true,
    "creaDataItemsKey": 'items',
    "statDataItemsKey": 'items',
    "defaultGroupName": '_default'
  },
  "macros": {},
  "dom": {
    "adAttrs": {},
    "adStyle": {},
    "containerAttrs": {},
    "imgAttrs": {},
    "imgStyle": {},
    "imgLinkAttrs": {},
    "imgLinkStyle": {},
    "frameAttrs": {},
    "frameStyle": {}
  },
  "run": {
    "autoWrite": true,
    "autoStart": ADventori.data.placement['autoStart'],
    "autoStartPassback": 'WRITE'
  },
  "track": {
    "event": {
      "AdShow": 'AdShow',
      "AdClick": 'AdClick',
      "AdClickBis": 'AdClickBis',
      "AdClickInfo": 'AdClickInfo',
      "AdView": 'AdView'
    },
    "url": {
      "clickTag": true,
      "clickTagParam": true,
      "itemUrl": true
    },
    "_info": {
      "mouseEvents": [],
      "creaInitData": 0,
      "creaReady": 0,
      "creaLoad": 0
    }
  },
  "require": {
    "ieVersion": ADventori.data.placement['ieMinVersion'],
    "validators": {
      "BACKUP_HTML_FOR_OLD_IE": function(conf) {
        return !(conf['displayFormat'] == 'HTML' && ADventori.env.browser.name == 'ie' && ADventori.env.browser.version < +conf.require.ieVersion);
      }
    }
  },
  "commands": {},
  "processed": {
    "dom": {}
  }
},

_conf: {
  urls: {
    "displayTag": true,
    "displayTagScript": true,
    "displayTagScriptWrite": true,
    "clickTag": true,
    "clickTagPxl": true,
    "creaUrl": true,
    "passbackUrl": true
  },
  array: {
    "displayTag": true,
    "displayTagScript": true,
    "displayTagScriptWrite": true,
    "clickTagPxl": true
  },
  displayFn: {
    "CUSTOM": 'displayCustom',
    "PASSBACK": 'displayPassback',
    "IMAGE": 'displayImage',
    "HTML": 'displayHtml'
  }
}

});


_extend(ADventori, {

macros: {
  pattern: /\[([^\[\]]+)\]/g,
  defaults: {
    "PROTOCOL": ADventori.data.request.protocol,
    "HOSTNAME": ADventori.data.request.hostname,
    "WIDTH": ADventori.data.size.width,
    "HEIGHT": ADventori.data.size.height,
    "SIZE": (ADventori.data.size.width + 'x' + ADventori.data.size.height),
    "PLACEMENT": ADventori.data.placement['placementId'],
    "TIMESTAMP": ADventori.data.track.timestamp,
    "RANDOM": _utils.uniqueId()
  },
  
  replace: function(str, macros) {
    if (!ADventori.assert._checkArgs(typeof str == 'string', {name: 'macros.replace', message: 'NO_STRING_INPUT'})) {
      return str;
    }
    macros = _extend({}, ADventori.macros.defaults, ADventori.conf.macros, macros);
    return str.replace(ADventori.macros.pattern, function(match, p1) {
      return (macros[p1] != null ? macros[p1] : match);
    });
  }
}

});


_extend(ADventori, {


start: function() {
  if (!ADventori.assert._checkArgs(!ADventori.started, 'ADVENTORI_ALREADY_STARTED', 'AdErrorConf')) {
    return;
  }
  ADventori.started = true;
  ADventori.fn.attempt('runAll', [ADventori.conf]);
},


autoStart: function() {
  var conf = ADventori.conf;
  var isPassback = ADventori.data.params._scn == 'passback' || conf['displayPassback'] || conf['displayFormat'] == 'PASSBACK';
  var autoStart = isPassback ? conf.run['autoStartPassback'] : conf.run['autoStart'];
  var autoWrite = conf.run['autoWrite'];
  if (autoWrite) {
    ADventori.fn.attempt('writeContainer');
  }
  if (autoStart) {
    var autoStartFn = function() {
      ADventori.fn.attempt('processDomContainer');
      ADventori.track.attempt(ADventori.fn.autoStart, 'fn.autoStart', 'AdErrorConf');
    };
    if (autoWrite) {
      ADventori.dom.onWrite(window, autoStartFn);
    } else {
      autoStartFn();
    }
  }
}

});


_extend(ADventori.fn, {


attempt: function(fnName, args, trackerType, trackerProps, onError) {
  return ADventori.track.attempt(_utils._bind(this[fnName], this, args), fnName, trackerType, trackerProps, onError);
},


exec: function(cmd, args) {
  return ADventori.track.attempt(_utils._bind(function() {
    debug.queue.push(['exec', arguments, debug.stack.slice()]);
    var conf = this.conf;
    var fn = typeof cmd == 'function' ? cmd : (ADventori.ext.commands[cmd] || conf.commands[cmd]);
    if (!fn) {
      throw ({name: 'fn.exec', message: ['INVALID_COMMAND', cmd, args].join(',')});
    }
    return ADventori.track.attempt(_utils._bind(fn, this, args), ['exec_cmd', typeof cmd == 'function' ? cmd.name : cmd].join('_'), 'AdErrorExec');
  }, this, arguments), ['exec', cmd].join('_'), 'AdErrorExec');
},


execCrea: function(cmd, args) {
  return ADventori.track.attempt(_utils._bind(function() {
    debug.queue.push(['execCrea', arguments, debug.stack.slice()]);
    return ADventori.ext.execCrea({
      id: this.id,
      cmd: cmd,
      args: _slice.call(args || [])
    });
  }, this, arguments), ['execCrea', cmd].join('_'), 'AdErrorExec');
},


triggerCreaEvent: function(event, args) {
  return ADventori.track.attempt(_utils._bind(function() {
    if (this.conf.track._info['creaLoad']) {
      return this.execCrea('event', [event, _slice.call(args || [])]);
    }
    return false;
  }, this, arguments), ['triggerCreaEvent', event].join('_'), 'AdErrorExec');
},


click: function(url) {
  return ADventori.track.attempt(_utils._bind(function() {
    var conf = this.conf;
    var clickTag = (conf.processed['clickTagStacked'] || '') + ADventori.macros.replace(url || '', conf.macros);
    ADventori.assert.isValidUrl(clickTag, 'fn.click');
    if (!clickTag) {
      return;
    }
    var open = this.exec('open', [clickTag]);
    this.exec('click', [{
      "open": open
    }]);
  }, this, arguments), ['click', url].join('_'), 'AdErrorExec');
}

});

_extend(ADventori.fn, {


start: function() {
  if (!ADventori.assert._checkArgs(!this.started, 'AD_ALREADY_STARTED', 'AdErrorConf')) {
    return;
  }
  this.started = true;
  this.attempt('runAd', [this.conf]);
},

autoStart: function() {
  var conf = ADventori.conf;
  var isPassback = ADventori.data.params._scn == 'passback' || conf['displayPassback'] || conf['displayFormat'] == 'PASSBACK';
  var autoStart = isPassback ? conf.run['autoStartPassback'] : conf.run['autoStart'];
  var startFn = function() {
    ADventori.track.attempt(ADventori.start, 'start');
  };
  if (typeof autoStart == 'function') {
    autoStart();
  } else if ((autoStart + '').toUpperCase() == 'WRITE') {
    startFn();
  } else if ((autoStart + '').toUpperCase() == 'READY') {
    var w = window;
    try {
      for (; w != w.top; w = w.parent) {(w.parent.document.domain)}
    } catch(e) {}
    ADventori.dom.onReady(w, startFn);
  }
},


writeContainer: function() {
  var conf = ADventori.conf;
  conf.processed.dom['containerId'] = conf.processed.dom['containerId'] || ('ADventori_ads_div_' + ADventori.id);
  
  var stubDivHtml = ADventori.dom.createHtml('div', {style: 'display: none;'}, '&nbsp;');
  var containerHtml = ADventori.dom.createHtml('div', _extend({
    id: conf.processed.dom['containerId'],
    style: 'margin: 0; padding: 0; border: 0;'
  }, conf.dom['containerAttrs']), stubDivHtml);
  ADventori.dom.writeHtml(document, containerHtml);
},


processDomContainer: function() {
  var conf = ADventori.conf;
  conf.processed.dom['container'] = conf.processed.dom['container'] || (conf.processed.dom['containerId'] && document.getElementById(conf.processed.dom['containerId'])) || null;
},

runAll: function(conf) {
  this.attempt('processDomContainer');
  this.attempt('onStart', arguments, 'AdErrorConf');
  this.attempt('runAds', arguments);
  this.attempt('onEnd', arguments, 'AdErrorConf');
},

runAds: function(conf) {
  ADventori.ads = ADventori.ads || [new ADventori(conf)];
  _utils.each(ADventori.ads, function(i, ad) {
    ADventori.track.attempt(function() {
      ad.start();
    }, 'runAd_' + i);
  });
},

runAd: function(conf) {
  this.attempt('onAdStart', arguments, 'AdErrorConf');
  this.attempt('processConf', arguments);
  this.attempt('setupMessage', arguments);
  this.attempt('onConfProcessed', arguments, 'AdErrorConf');
  this.attempt('displayAd', arguments);
  this.attempt('onDisplay', arguments, 'AdErrorConf');
  this.attempt('trackShow', arguments);
  this.attempt('fireDisplayTags', arguments);
  this.attempt('onAdEnd', arguments, 'AdErrorConf');
  this.attempt('startViewability', arguments);
},


processConf: function(conf) {
  this.attempt('processScenario', arguments);
  this.attempt('processUrls', arguments);
  this.attempt('processClickTag', arguments);
  this.attempt('processStatData', arguments);
  this.attempt('processCreaData', arguments);
  this.attempt('processDom', arguments);
},


processScenario: function(conf) {
  var self = this;
  var args = arguments;
  var paramScenario = ADventori.data.params._scn;
  var isCustom = conf['displayCustom'] || conf['displayFormat'] == 'CUSTOM';
  var isPassback = paramScenario == 'passback' || conf['displayPassback'] || conf['displayFormat'] == 'PASSBACK';
  var isBackup = paramScenario == 'backup' || conf['displayBackup'] || conf['displayFormat'] == 'IMAGE';

  if (isCustom) {
    conf.processed['displayCustom'] = true;
    conf.processed['displayFormat'] = 'CUSTOM';
    conf.processed['scenario'] = (
      conf['scenario'] ? conf['scenario'] :
      typeof conf['displayCustom'] == 'string' ? conf['displayCustom'] :
      conf.defaultScenario['custom']
    );
  } else if (isPassback) {
    conf.processed['displayPassback'] = true;
    conf.processed['displayBackup'] = conf['displayBackup'];
    conf.processed['displayFormat'] = 'PASSBACK';
    conf.processed['scenario'] = (
      paramScenario == 'passback' ? conf.paramScenario['passback'] :
      conf['scenario'] ? conf['scenario'] :
      typeof conf['displayPassback'] == 'string' ? conf['displayPassback'] :
      conf.defaultScenario['passback']
    );
  } else if (isBackup) {
    conf.processed['displayBackup'] = true;
    conf.processed['displayFormat'] = 'IMAGE';
    conf.processed['scenario'] = (
      paramScenario == 'backup' ? conf.paramScenario['backup'] :
      conf['scenario'] ? conf['scenario'] :
      typeof conf['displayBackup'] == 'string' ? conf['displayBackup'] :
      conf.defaultScenario['backup']
    );
  } else {
    var validationErrors = _utils.map(conf.require.validators, function(value, key) {
      var val = ADventori.track.attempt(_utils._bind(value, self, args), 'conf.require.validators.' + key, 'AdErrorConf');
      return (
        (typeof val == 'string') ? val :
        val === false ? key :
        null
      );
    });
    if (validationErrors.length > 0) {
      conf.processed['displayBackup'] = true;
      conf.processed['displayFormat'] = 'IMAGE';
      conf.processed['scenario'] = validationErrors[0];
    } else {
      conf.processed['displayDefault'] = true;
      conf.processed['displayFormat'] = conf['displayFormat'];
      conf.processed['scenario'] = (
        (conf.items && conf.items.getScenario(conf)) || (
          conf['scenario'] ? conf['scenario'] :
          conf.defaultScenario['_default']
        )
      );
    }
  }

  ADventori.assert._checkArgs(conf.processed['scenario'] && typeof conf.processed['scenario'] == 'string', 'NO_SCENARIO', 'AdErrorScenario');
  if (conf.processed['scenario']) {
    debug.queue.push(['scenario', arguments, debug.stack.slice()]);
  }
},


processUrls: function(conf) {
  _utils.each(ADventori._conf.urls, function(key, value) {
    if (value) {
      var url = (
        (conf.processed['displayBackup'] && conf.backup[key] != null) ? conf.backup[key] :
        conf[key]
      );
      if (ADventori._conf.array[key]) {
        url = url != null ? _utils.map([].concat(url), function(url) {
          return (url && ADventori.macros.replace(url, conf.macros));
        }) : [];
      } else {
        url = (url && ADventori.macros.replace(url, conf.macros));
      }
      conf.processed[key] = url;
    }
  });
},


processClickTag: function(conf) {
  conf.processed['clickTagParam'] = ADventori.data.params.URL || ADventori.data.params.clickTag;
  if (conf.track.url['clickTagParam'] && conf.processed['clickTagParam']) {
    ADventori.assert.isValidUrl(conf.processed['clickTagParam'], 'clickTagParam');
  }
  if (conf.track.url['clickTag']) {
    ADventori.assert.isValidUrl(conf.processed['clickTag'], 'clickTag');
  }
  var clickTag = conf.processed['clickTag'] || '';
  if (conf.clickTagEncoded){
    clickTag = _utils._encode(clickTag);
  }
  var clickTagStacked = (conf.processed['clickTagParam'] || '') + clickTag;  
  if(conf.clickTagEnd){
      var params = ADventori.track.toUrlClickRedirect(conf.track.event['AdClick'], {
        "urlClick": null
      },clickTag);    
      params = params.substring(params.indexOf('?')+1,params.length);
      params = Base64.encode(params);
      clickTagStacked = (conf.processed['clickTagParam'] || '') + ADventori.data.request.protocol+ADventori.data.request.hostname+'/tracker/eclk/'+  params;
      conf.processed['clickTagStacked'] = clickTagStacked;  
  }else{  
      conf.processed['clickTagStacked'] = ADventori.track.toUrlClickRedirect(conf.track.event['AdClick'], {
        "urlClick": null
      }, clickTagStacked);  
  }
  
},


processStatItems: function(conf) {
  if (conf.items_v4.statItems) {
    var hasCreaDataItems = (conf.creaData && conf.items_v4.creaDataItemsKey && (conf.items_v4.creaDataItemsKey in conf.creaData));
    var hasStatDataItems = (conf.statData && conf.items_v4.statDataItemsKey && (conf.items_v4.statDataItemsKey in conf.statData));
    if (hasCreaDataItems || hasStatDataItems) {
      var items = hasCreaDataItems ? conf.creaData[conf.items_v4.creaDataItemsKey] : conf.statData[conf.items_v4.statDataItemsKey];
      var itemIdsByGroupName = {};
      var itemIds = [];
      ADventori.assert._checkArgs(items && _utils._isArray(items) && items.length > 0, 'NO_ITEMS_ARRAY', 'AdErrorConfItems');
      _utils.each(items, function(i, item) {
        ADventori.assert._checkArgs(item, 'NO_ITEM', 'AdErrorConfItems');
        if (item) {
          ADventori.assert._checkArgs(item.id, 'NO_ITEM_ID', 'AdErrorConfItems');
          ADventori.assert._checkArgs(item.groupName, 'NO_ITEM_GROUPNAME', 'AdErrorConfItems');
          ADventori.assert._checkArgs(item.data, 'NO_ITEM_DATA', 'AdErrorConfItems');
          if (item.id) {
            var groupName = item.groupName || conf.items_v4.defaultGroupName;
            var itemIdsFromGroup = itemIdsByGroupName[groupName] = itemIdsByGroupName[groupName] || [];
            itemIdsFromGroup.push(item.id);
            itemIds.push(item.id);
          }
          if (conf.track.url['itemUrl'] && item.data && ('url' in item.data)) {
            ADventori.assert.isValidUrl(item.data.url, 'itemUrl');
          }
        }
      });
      var deduplicatedItemIds = ADventori.collect.arrays.deduplicateBy(itemIds, function(itemId) {
        return itemId;
      });
      ADventori.assert._checkArgs(itemIds.length === deduplicatedItemIds.length, 'DUPLICATE_ITEM_ID', 'AdErrorConfItems');
      _utils.each(itemIdsByGroupName, function(groupName, itemIdsFromGroup) {
        itemIdsByGroupName[groupName] = _utils.map(itemIdsFromGroup, function(itemId) {
          return _utils._encode(itemId + '');
        }).join('|');
      });
      return {
        "_stat_items": _utils.toQueryString(itemIdsByGroupName)
      };
    }
  }
  return null;
},


processStatData: function(conf) {
  var statData = {};
  var statItems = this.attempt('processStatItems', arguments);
  _extend(statData, conf.statData);
  _extend(statData, {
    "_stat_scn": conf.processed['scenario']
  });
  if (conf.processed['displayDefault'] && conf.items) {
    _extend(statData, conf.items.getStatData(conf));
  }
  if (statItems) {
    _extend(statData, statItems);
  }
  if (ADventori.conf.mraid) {
    _extend(statData, ADventori.conf.mraid.statData);
  }
  conf.processed['statData'] = statData;
  conf.processed['statUrl'] = _utils.addQueryParams(conf.processed['displayPassback'] ? 'passback' : conf.processed['creaUrl'], statData);
},


processCreaData: function(conf) {
  var confCreaData = {
    "version": ADventori.version,
    "env": {
      "name": ADventori.data.params._env || 'prod',
      "testInitData": ADventori.data.params._testInitData,
      "preview": ADventori.data.params.preview
    },
    "conf": {
      "id": this.id,
      "clickTag": conf.processed['clickTagStacked'],
      "request": ADventori.data.request,
      "placementId": ADventori.data.placement['placementId'],
      "track": {
        "urlError": ADventori.track.toUrlError('AdErrorEnablerMessage'),
        "enabled": ADventori.data.placement.track
      }
    }
  };
  var creaData = {};
  _extend(creaData, conf.creaData);
  if (conf.processed['displayDefault'] && conf.items) {
    _extend(creaData, conf.items.getCreaData(conf));
  }
  conf.processed['creaData'] = creaData;
  confCreaData['data'] = creaData;
  if (ADventori.conf.mraid) {
    confCreaData['mraidData'] = ADventori.conf.mraid.mraidData;
  }
  conf.processed['confCreaData'] = confCreaData;
},


processDom: function(conf) {
  conf.processed.dom['adId'] = conf.processed.dom['adId'] || (this.id && ('ADventori_ad_' + this.id));
  conf.processed.dom['container'] = conf.processed.dom['container'] || ADventori.conf.processed.dom['container'];
  conf.processed.dom['document'] = conf.processed.dom['document'] || (conf.processed.dom['container'] ? ADventori.dom.getDocument(conf.processed.dom['container']) : null);
  conf.processed.dom['window'] = conf.processed.dom['window'] || (conf.processed.dom['document'] ? ADventori.dom.getWindow(conf.processed.dom['document']) : null);
  conf.processed.dom['adStyle'] = _extend({
    width: conf['size'].width + 'px',
    height: conf['size'].height + 'px',
    display: 'block',
    margin: 'auto',
    padding: 0,
    border: 0
  }, conf.dom['adStyle']);
},


setupMessage: function(conf) {
  var win = conf.processed.dom['window'];
  if (!win) {
    return;
  }
  ADventori.dom.addEventListener(win, 'message', ADventori.ext.receiveMessage);
},


fireDisplayTags: function(conf) {
  _utils.map(conf.processed['displayTag'], ADventori.dom.firePixel);
  _utils.map(conf.processed['displayTagScript'], ADventori.dom.getScript);
  _utils.map(conf.processed['displayTagScriptWrite'], ADventori.dom.writeScript);
},


fireClickTags: function(conf) {
  _utils.map(conf.processed['clickTagPxl'], ADventori.dom.firePixel);
},


trackShow: function(conf) {
  if (conf.track.event['AdShow']) {
    ADventori.dom.firePixel(ADventori.track.toUrlShow(conf.track.event['AdShow'], {
      "urlClick": conf.processed['statUrl']
    }));
  }
},


trackClick: function(conf, params) {
  params = params || {};
  if (conf.track.event['AdClickBis']) {
    ADventori.dom.firePixel(ADventori.track.toUrlClickPixel(conf.track.event['AdClickBis'], {
      "urlClick": conf.processed['statUrl'],
      "retailer_1": params['item'] && params['item'].id,
      "retailer_3": params['open']
    }));
  }
  if (conf.track.event['AdClickInfo']) {
    ADventori.dom.firePixel(ADventori.track.toUrlClickPixel(conf.track.event['AdClickInfo'], {
      "retailer_1": conf.track._info['mouseEvents'].slice(0, 51).join(''),
      "retailer_2": conf.track._info['creaInitData'],
      "retailer_3": params['open']
    }));
  }
},


trackCreaInitData: function(conf) {
  conf.track._info['creaInitData']++;
},


trackCreaReady: function(conf) {
  conf.track._info['creaReady']++;
},


trackCreaLoad: function(conf) {
  conf.track._info['creaLoad']++;
},


triggerVisibleStateEvent: function(conf) {
  if (conf.viewability) {
    if (!conf.viewability.disposed) {
      var currentState = conf.viewability._currentState;
      if (currentState && currentState.visibleState) {
        this.triggerCreaEvent(currentState.visibleState);
      }
    } else {
      this.triggerCreaEvent('visible');
    }
  }
},


startViewability: function(conf) {
  if (conf.viewability) {
    ADventori.track.setTimeout(function() {
      conf.viewability.start();
    }, conf.viewability.pollInterval, 'startViewability', 'AdErrorView');
  }
}

});

_extend(ADventori.fn, {


displayAd: function(conf) {
  var displayFn = ADventori._conf.displayFn[conf.processed['displayFormat']];
  if (displayFn) {
    this.attempt(displayFn, arguments);
  }
},


displayPassback: function(conf) {
  if (conf.processed['displayBackup']) {
    this.attempt('displayImage', arguments);
  }
  ADventori.assert.isValidUrlSecure(conf.processed['passbackUrl'], 'passbackUrl');
  ADventori.dom.writeScript(document, conf.processed['passbackUrl']);
},


displayImage: function(conf) {
  var debugStackCopy = debug.stack.slice();
  var self = this,
    doc = conf.processed.dom['document'],
    container = conf.processed.dom['container'];

  ADventori.assert.isValidUrlSecure(conf.processed['creaUrl'], 'creaUrl');
  if (!ADventori.assert._checkArgs(doc && container, ['NO_CONTAINER', doc && 'doc', container && 'container'].join(','), 'AdErrorDom')) {
    return;
  }
  var elLink = ADventori.dom.createElement(doc, 'a', _extend({
    href: conf.processed['clickTagStacked'],
    target: '_blank',
    rel: 'noopener',
    style: _extend({}, conf.processed.dom['adStyle'], conf.dom['imgLinkStyle']),
    on: {
      mouseenter: function(e) {
        conf.track._info['mouseEvents'].push(1);
      },
      mouseleave: function(e) {
        conf.track._info['mouseEvents'].push(0);
      },
      click: function(e) {
        var mraidOpen = false;
        try {
          if (typeof mraid != 'undefined' && mraid.open) {
            mraid.open(this.href);
            mraidOpen = true;
          }
        } catch(err) {}
        self.exec('click', [{
          "open": (
            mraidOpen ? 'mraid' :
            'a'
          )
        }]);
        if (mraidOpen) {
          if (e.preventDefault) {
            e.preventDefault();
          } else {
            e.returnValue = false;
          }
        }
      }
    }
  }, conf.dom['imgLinkAttrs']));
  var elImg = conf.processed.dom['adElement'] = ADventori.dom.createElement(doc, 'img', _extend({
    id: conf.processed.dom['adId'],
    src: conf.processed['creaUrl'],
    style: _extend({}, conf.processed.dom['adStyle'], conf.dom['imgStyle']),
    on: {
      error: function(e) {
        debug.queue.push(['errorImage', arguments, debugStackCopy]);
      }
    }
  }, conf.dom['adAttrs'], conf.dom['imgAttrs']));
  elLink.appendChild(elImg);
  container.appendChild(elLink);
},


displayHtml: function(conf) {
  var doc = conf.processed.dom['document'],
    container = conf.processed.dom['container'];

  ADventori.assert.isValidUrlSecure(conf.processed['creaUrl'], 'creaUrl');
  if (!ADventori.assert._checkArgs(doc && container, ['NO_CONTAINER', doc && 'doc', container && 'container'].join(','), 'AdErrorDom')) {
    return;
  }
  var elIframe = conf.processed.dom['adElement'] = ADventori.dom.createElement(doc, 'iframe', _extend({
    id: conf.processed.dom['adId'],
    name: _JSON.stringify(conf.processed['confCreaData']),
    src: conf.processed['creaUrl'],
    width: conf['size'].width,
    height: conf['size'].height,
    frameborder: 0,
    marginwidth: 0,
    marginheight: 0,
    scrolling: 'no',
    style: _extend({}, conf.processed.dom['adStyle'], conf.dom['frameStyle']),
    on: {
      mouseenter: function(e) {
        conf.track._info['mouseEvents'].push(1);
      },
      mouseleave: function(e) {
        conf.track._info['mouseEvents'].push(0);
      }
    }
  }, conf.dom['adAttrs'], conf.dom['frameAttrs']));
  container.appendChild(elIframe);
},


displayCustom: function(conf) {}

});


_extend(ADventori.fn, {
  onStart: function(){},
  onEnd: function(){},
  onAdStart: function(){},
  onAdEnd: function(){},
  onConfProcessed: function(){},
  onDisplay: function(){},
  onClick: function(){},
  onCreaInitData: function(){},
  onCreaReady: function(){},
  onCreaLoad: function(){}
});


_extend(ADventori, {

q: function() {
  if (!ADventori.assert._checkArgs(ADventori.data.placement.siteTracker.useTag, {name: 'ADventori.q', message: 'NOT_ACTIVATED'}, 'AdErrorUnsupported')) {
    return;
  }
  var o = ADventori.q = function(){(o.q=o.q||[]).push(arguments)};
  o.l = +(new _Date());
  o.p = ADventori.data.request.protocol;
  o.h = ADventori.data.request.domainName;
  o.t = 'image';
  o.q = [];
  o.q.push(['create', ADventori.data.brand.id]);
  o.q.push(arguments);
  ADventori.dom.getScript(document, ADventori.data.request.protocol + ADventori.data.request.domainName + ADventori.data.placement.siteTracker.tagUrl);
}

});


ADventori.Items = function(_this) {
  _extend(this, {
    "_items": [],
    "_scenarios": {},
    "_enabled": false,
    "creaDataKey": "items",
    "displayBackupIfEmpty": true,
    "options": {}
  });
  _extend(true, this, _this.conf.items);
  this._this = _this;
};

_extend(ADventori.Items.prototype, {

get: function(group, id) {
  if (!ADventori.assert._checkArgs(group != null && id != null, {name: 'items.get', message: 'NO_INPUT'})) {
    return null;
  }
  return group['i_' + id];
},

getRelated: function(itemOrItems) {
  if (!ADventori.assert._checkArgs(ADventori.data.results.items.related != null, {name: 'items.getRelated', message: 'NO_RELATED_ITEMS'}) ||
      !ADventori.assert._checkArgs(itemOrItems != null, {name: 'items.getRelated', message: 'NO_INPUT'})) {
    return {};
  }
  var self = this;
  var related = {};
  var items = itemOrItems.id != null ? [itemOrItems] : itemOrItems;
  _utils.each(items, function(i, item) {
    if (item != null && item.id != null) {
      _extend(related, self.get(ADventori.data.results.items.related, item.id));
    }
  });
  return related;
},

size: function() {
  return this._items.length;
},

toArray: function() {
  return this._items.slice();
},

clear: function() {
  this._items = [];
  this._scenarios = {};
},

addAll: function() {
  return ADventori.track.attempt(_utils._bind(this._addAll, this, arguments), 'items.addAll');
},

_addAll: function(items, options) {
  var _this = this._this;
  var conf = _this.conf;
  var itemsMap = {};
  _utils.each(this._items, function(i, item) {
    if (item != null && item.id != null) {
      itemsMap[item.id] = item;
    }
  });
  options = _extend({}, this.options, options);
  items = _utils.map(items, function(item) {
    if (
      item != null &&
      item.id != null &&
      !item.deleted && (
        !itemsMap[item.id] &&
        (itemsMap[item.id] = item)
      ) && (
        !options.map ||
        (item = ADventori.track.attempt(_utils._bind(options.map, _this, arguments), 'items.options.map', 'AdErrorConf'))
      )
    ) {
      return item;
    }
  });
  if (options.sort) {
    ADventori.track.attempt(function() {
      items = items.slice().sort(options.sort);
    }, 'items.options.sort', 'AdErrorConf');
  } else if (options.shuffle) {
    items = ADventori.rand.shuffle(items);
  }
  var nbItemsToAdd = Math.max(0, Math.min(items.length, options.max != null ? options.max : items.length, options.maxTotal != null ? (options.maxTotal - this._items.length) : items.length));
  if (nbItemsToAdd > 0) {
    items.length = nbItemsToAdd;
    _utils.each(items, function(i, item) {
      if (item && item.data && ('url' in item.data)) {
        item.data.url = item.data.url && ADventori.macros.replace(item.data.url, conf.macros);
        if (conf.track.url['itemUrl']) {
          ADventori.assert.isValidUrl(item.data.url, 'itemUrl');
        }
      }
    });
    _push.apply(this._items, items);
    this._scenarios[options.scenario] = (this._scenarios[options.scenario] || 0) + nbItemsToAdd;
  }
  ADventori.assert._checkArgs(options.scenario && typeof options.scenario == 'string', 'NO_ITEM_SCENARIO', 'AdErrorScenario');
  this._enabled = true;
  return nbItemsToAdd;
},

getScenario: function(conf) {
  if (this._enabled) {
    return (
      _utils.toQueryString(this._scenarios) ||
      conf.defaultScenario['items']
    );
  }
},

getStatData: function(conf) {
  if (this._enabled) {
    return {
      "_stat_ids": _utils.map(this._items, function(item) {
        return _utils._encode(item != null && item.id != null ? (item.id + '') : '');
      }).join('|')
    };
  }
},

getCreaData: function(conf) {
  if (this._enabled) {
    var items = {};
    items[this.creaDataKey] = this._items;
    return items;
  }
}

});

ADventori.conf.require.validators['BACKUP_FOR_NO_ITEM'] = function(conf) {
  return !(conf.items && conf.items._enabled && conf.items.displayBackupIfEmpty && conf.items.size() == 0);
};
ADventori.conf.defaultScenario['items'] = 'ITEMS_DEFAULT';

ADventori.conf.items = new ADventori.Items(ADventori);

})();

ADventori.track.attempt(function() {

debug.stack.push('conf_campaign');
// Disable tracking _stat_items (v4)
ADventori.conf.items_v4.statItems = false;

// DEBUT CONF GLOBAL
var trads = {
    'fr': {
        introStation: "Véhicule disponible à",
        mentions: "*Voir conditions",
        cta: "J'EN PROFITE",
        vignetteFrom: "Dès",
        vignetteDay: "/jour*"
    },
    'en': {
        introStation: "Vehicle available at",
        mentions: "*See conditions",
        cta: "BOOK NOW",
        vignetteFrom: "From",
        vignetteDay: "/day*"
    },
    'it': {
        introStation: "Noleggia un veicolo a",
        mentions: "*Vedere le condizioni",
        cta: "PRENOTA ORA",
        vignetteFrom: "Da",
        vignetteDay: "/giorno*"
    },
    'es': {
        introStation: "Vehículo disponible en",
        mentions: "*Ver condiciones",
        cta: "RESERVA",
        vignetteFrom: "Desde",
        vignetteDay: "/dia*"
    },
    'de': {
        introStation: "Fahrzeug verfügbar in",
        mentions: "*Siehe Bedingungen",
        cta: "JETZT BUCHEN",
        vignetteFrom: "Ab",
        vignetteDay: "/Tag*"
    },
    'pt': {
        introStation: "Vehiclero disponível em",
        mentions: "*Ver condições",
        cta: "RESERVE JÁ",
        vignetteFrom: "Desde",
        vignetteDay: "/dia*"
    },
    'nl': {
        introStation: "Auto beschikbaar in",
        mentions: "*Zie voorwaarden",
        cta: "RESERVEER NU",
        vignetteFrom: "Vanaf",
        vignetteDay: "/dag*"
    }
};

/* BEWARE : dbmPixelIds contains in fact dbmCampaignId macro */

var p = ADventori.data.params;
var placementInfo = ADventori.data.placement.placementId;
/*** Modif Fabien pour Adara ***/
var placementAdara = placementInfo.split('_')[4];
var langAdara = placementInfo.split('_')[3];
debug.log(placementAdara + ' - ' + langAdara);
/*** Fin modif Fabien etape 1 ***/
window.tab_adloox_alerte_id_netbooster = [ p['adloox-publisherId'], (p['adloox-campaignId'] || p['dbmPixelIds']), p['adloox-creativeId'], p['adloox-sourceUrl'], p['adloox-insertionOrderId'], p['adloox-exchangeId']];

var r_ret_generic = ADventori.data.placement.placementId.match(/Europcar_Netbooster_201507_(.*)_RET_(.*)_GENERIQUE/);
var r_ret = ADventori.data.placement.placementId.match(/Europcar_Netbooster_201507_(.*)_RET/);
var force_ret_generic = false;
var isRet = r_ret && !r_ret_generic;

/* BEWARE : dbmPixelIds conatins in fact dbmCampaignId macro */
var dbmPixelId = p.dbmPixelIds ? p.dbmPixelIds.split(',')[0] : undefined;
/*** Modif Fabien pour Adara ***/
if (placementAdara == 'Adara') {
  dbmPixelId = langAdara.toLowerCase()+'_'+placementAdara.toLowerCase();
  debug.log('pixelDbm Adara : '+dbmPixelId);
  window.tab_adloox_alerte_id_netbooster_magellan = [ p['adloox-advertiserId'], (p['adloox-campaignId'] || p['adloox-networkId']), p['adloox-sellerMemberId'], p['adloox-assetId'], p['adloox-domain'], p['adloox-impressionId']];
}
/*** Fin modif Fabien etape 2 ***/
//debug.log("r_ret_generic :"+r_ret_generic+" r_ret: "+r_ret);

var deepLink;

// Variable for all conf
var campaignData;
var defaultCampID;
var CampID;
var retCampIds;
var data;
var domain;

var error_CampID = false;

var RetCheckInCountryCampaignData = ADventori.data.campaignData.RetCheckInCountry;
var RetCheckInCountryData;

function parseDate(dateTime) {
  var dateTimeParts, date, time, day, month, year, hour, minutes;
  
  if (dateTime) {
    dateTimeParts = dateTime.split('T');
    if (dateTimeParts.length == 2) {
      date = dateTimeParts[0];
      time = dateTimeParts[1];
      day = date.slice(6, 8);
      month = date.slice(4, 6);
      year = date.slice(0, 4);
      hour = time.slice(0, 2);
      minutes = time.slice(3, 5);
      return ADventori.date.parse([year, month, day].join('-') + 'T' + [hour, minutes].join(':'));
    }
  }
  
  return new Date(NaN);
}

// Global StatData
// /!\ Do NOT override it !
ADventori.conf.statData = {
  dbmPixelIds: p.dbmPixelIds,
  dbmPixelId: dbmPixelId
};

  
/*** Gestion des Op Spe ***/
var now = p.dateToday ? ADventori.date.parse(p.dateToday) : ADventori.date.now();
debug.log('now : '+now);
var opeSpeDateIn = ADventori.date.parse('2018-04-23T00:00:00');
var opeSpeDateOut = ADventori.date.parse('2018-05-14T23:59:59');
var opSpe = false;

var opeSpeRetDateIn = ADventori.date.parse('2018-01-02T00:00:00');
var opeSpeRetDateOut = ADventori.date.parse('2018-01-31T23:59:59');
var opSpeRet = false;

if (+now >= +opeSpeDateIn && +now <= +opeSpeDateOut) {
  opSpe = true;
}

if (+now >= +opeSpeRetDateIn && +now <= +opeSpeRetDateOut) {
  opSpeRet = true;
}

debug.log('Op Spe en cours ? '+opSpe);
debug.log('Op Spe Ret en cours ? '+opSpeRet);
/*** Fin gestion des Op Spe ***/

if (isRet) {

/* --- RETARGETING PAS GENERIQUE--- */

(function() {

var error_nomStation = false;
var error_items = false;
var error_lang = false;
var error_currency = false;
var error_date = false;
var error_force_ret = false;

var langs = {'COM': 'en', 'UK': 'en', 'AU': 'en', 'NZ': 'en'};
domain = r_ret && r_ret[1];
var langPlacement = langs[domain] || (domain && domain.toLowerCase()) || 'en';

campaignData = ADventori.data.campaignData.ret;
defaultCampID = 'COM_RET';
retCampIds = {'COM': defaultCampID};
CampID = retCampIds[domain] || (domain + '_RET');
data = campaignData[CampID];

if(!data) {
  data = campaignData[defaultCampID];
  error_CampID = true;
}

var campaignDataOpSpeRet;
var dataOpeSpeRet;
if (opSpeRet) {
  campaignDataOpSpeRet = ADventori.data.campaignData.opeSpeRet;
  dataOpeSpeRet = campaignDataOpSpeRet[domain];
}

var devises = {
EUR: '€',
GBP: '£',
USD: '$',
JPY: '¥',
AUD: '$',
NZD: '$',
CAD: '$'
};

var deviseByDomain = {
'AU': '*',
'BE': 'EUR',
'COM': '*',
'DE': 'EUR',
'ES': 'EUR',
'FR': 'EUR',
'IT': 'EUR',
'NZ': '*',
'PT': 'EUR',
'UK': 'GBP'
};

//Gestion beandeau promo dans créa : Nice & UK
/*var segmentPromos = {'4101704': 'Nice', '4276036': 'UK', '4276303': 'UK' };
var codeStationPromos = {"NCET02": true, "NCEN01": true, "NCEL01": true, "NCEW02": true, "NCEC01": true};*/


function trim(str) {
  if (typeof str.trim == 'function') {
    return str.trim();
  }
  return str.replace(/^\s+|\s+$/gm, '');
}

function ellipsis(str, maxLength) {
  if (str.length > maxLength) {
    str = str.substr(0, maxLength - 1) + '…';
  }
  return str;
}

function padNumber(s) {
  s = s + '';
  if (s.length < 2) {
    s = "0" + s;
  }
  return s;
}

function isFiniteNumber(num) {
  return isFinite(num) && !isNaN(num);
}

function toFiniteNumber(str) {
  var numberString = str.replace(/\s+/g, '').replace(',', '.').replace(/^[^0-9.-]+/, ''),
      number = parseFloat(numberString);
  if (isFiniteNumber(number)) {
    return number;
  }
  return null;
}

function toDividedStr(str, divisor, round, keepUnits) {
  str = str.replace(/^0/, '');
  
  var num = toFiniteNumber(str);
  
  if (num == null) {
    return str;
  }
  
  var resultNum = num / divisor;
  
  if (round) {
    resultNum = Math.round(isFiniteNumber(resultNum) ? resultNum : num);
  }
  
  if (!(isFiniteNumber(resultNum) && resultNum > 0)) {
    return str;
  }
  
  var leftIndex = str.search(/[0-9.-]+/),
      rightIndex = str.search(/[^0-9.-]+$/),
      left = keepUnits && leftIndex >= 0 ? str.substring(0, leftIndex) : '',
      right = keepUnits && rightIndex >= 0 ? str.substring(rightIndex) : '';
  if (keepUnits) {keepUnits.unit = (left && trim(left)) || (right && trim(right));}
  return resultNum;
}

function formatPriceAndDevise(price, devise) {
  var isLivreOrDollar = devise == '£' || devise == '$';
  return (isLivreOrDollar ? devise : '') + price + (!isLivreOrDollar ? devise : '');
}

// Données de la dernière page visitée
var c = {};
var siteTrackers = ADventori.data.results.userData.siteTrackers;

var itemDevise;
var items = [];

var lang;
  
if (siteTrackers.PageViewDesktopStep2.car.length || siteTrackers.PageViewDesktopStep2_2.car.length || siteTrackers.PageViewDesktopStep3.car.length) {

  // Conf with SiteTrackers
  var lastAttr;
  var lastDate;
  var setLastData = function(attr) {
    if (attr[0]) {
      var date = ADventori.date.parse(attr[0].date);
      if (!lastDate || +date >= +lastDate) {
        lastDate = date;
        lastAttr = ADventori.utils.map(attr, function(attrObj) {
          if (attrObj.data.time == attr[0].data.time) {
            return attrObj;
          }
        });
        c = lastAttr[0].data;
      }
    }
  };
  setLastData(siteTrackers.PageViewDesktopStep2.car);
  setLastData(siteTrackers.PageViewDesktopStep2_2.car);
  setLastData(siteTrackers.PageViewDesktopStep3.car);

  lang = (c['la'] && c['la'].toLowerCase());
  
  var wordings = trads[lang || 'en'];
  
  var nbDays = parseInt(c['du']);

  var addItem = function(name, prix, image) {
    var keepUnits = {};
    var prixParJour = toDividedStr(prix, nbDays, true, keepUnits);
    if (name && prixParJour && image) {
      itemDevise = keepUnits.unit;
      var item = {
        id: items.length,
        data: {
          introStation: wordings.introStation,
          mentions: wordings.mentions,
          cta: wordings.cta,
          vignette1: wordings.vignetteFrom,
          vignette2: formatPriceAndDevise(prixParJour, devises[itemDevise] || itemDevise),
          vignette3: wordings.vignetteDay,
          nomStation: c['on'] || '',
          photo: image,
          bg: image, // for opeSpe creas
          url: "",
          prixParJour: prixParJour
        }
      };
      if (opSpeRet) {
        ADventori.utils.extend(item.data, dataOpeSpeRet[c['s']]);
      }
      items.push(item);
    }
  };
  //debug.log(data);

  for (var i = 0; i < lastAttr.length; i++) {
    var itemData = lastAttr[i].data;
    if(itemData["s"] == "2"){
      addItem(itemData['ca'], itemData['pr'] || '', itemData['vi'] || '');
    } else {
      addItem(' ', itemData['pr'] || '', itemData['vi'] || '');
    }
  }

}

//var nomStation = ellipsis(c['on'] || '', 16);
var nomStation = c['on'] || '';

var xtorAds = {'COM': '2100', 'UK': '2190','FR': '2150', 'IT': '2160','DE': '2130', 'ES': '2140', 'PT': '2180', 'BE': '2120', 'AU': '2110', 'NZ': '2170'};

ADventori.conf.macros = {
  'ADV_STEP': 'STP' + (c['s'] == '2' ? '2.1' : (c['s'] == '2.2' ? '2.2' : (c['s'] == '3' ? '3' : ''))),
  'ADV_AD': xtorAds[domain],
  'LANG': lang,
  'DOMAIN': domain
};

var checkOutDate = parseDate(c['od'] + 'T' + c['oh']);
var checkInDate = parseDate(c['id'] + 'T' + c['ih']);
var condition_date = (+checkOutDate > +now);
var condition_nomStation = nomStation;
var condition_items = items.length > 0;
var condition_lang = lang == langPlacement || (langPlacement == 'be' && (lang == 'fr' || lang == 'en' || lang == 'nl'));
var condition_currency = itemDevise && (deviseByDomain[domain] == '*' || deviseByDomain[domain] == itemDevise);

// Gestion Check In Country (ancien ope spe ret)
/*
var siteCountry = c['co'];
siteCountry = siteCountry && c['co'].split('.');
siteCountry = siteCountry && siteCountry[siteCountry.length - 1];
siteCountry = siteCountry && siteCountry.toUpperCase();
var checkInCountry = c['ic'];
checkInCountry = checkInCountry && checkInCountry.toUpperCase();

RetCheckInCountryData = RetCheckInCountryCampaignData[siteCountry] && RetCheckInCountryCampaignData[siteCountry][checkInCountry];

if (RetCheckInCountryData) {
  
ADventori.conf.creaData['items'] = [{
  id:1,
  data: {
    introStation: RetCheckInCountryData.introStation,
    txt: RetCheckInCountryData.txt,
    cta: RetCheckInCountryData.cta,
    mentions: RetCheckInCountryData.mentions,
    vignette1: RetCheckInCountryData.vignette1,
    vignette2: RetCheckInCountryData.vignette2,
    vignette3: RetCheckInCountryData.vignette3,
    photo: ADventori.macros.replace('/lp/dd/europcar/Europcar_Netbooster_201507/creas/new/img/[SIZE]/' + RetCheckInCountryData.photo)
  }
}];

ADventori.conf.creaUrl = '[PROTOCOL][HOSTNAME]/lp/dd/europcar/Europcar_Netbooster_201507/creas/new/RON/[SIZE]/index.html';
ADventori.conf.scenario = RetCheckInCountryData.scenario;

// Replace trackings with RetCheckInCountryData
data = RetCheckInCountryData;

//Fin gestion Check In Country (ne pas oublier de passer le "} else" juste en dessous en commentaire et garder juste le "if" si on désactive cette fonction

} else*/ if (condition_nomStation && condition_items && condition_lang && condition_currency && condition_date) {

  /*ADventori.conf.creaData = {
    lang: lang,
    nomStation: nomStation
    bandeau: langPlacement == 'fr' ? '<strong>Jusqu\'à 25% de<br/>remise à Pâques!</strong>' : ''
    
    //Gestion beandeau promo dans créa : Nice
    bandeau: (segmentPromos[dbmPixelId] == 'Nice' || codeStationPromos[c['ol']] ? '10€ offerts avec le<br/>code <strong>FRPROMO2NICE2015</strong>' : ((segmentPromos[dbmPixelId] == 'UK' || c['oc'] == 'GB') ? (lang == 'en' ? '<strong>Flash sale! Up to 20%<br/>off UK car hire!</strong>' : (lang == 'fr' ? '<strong>Jusqu\'à -15% en Angleterre<br/>en ce moment!</strong>' : '')) : ''))
    
  };*/
  
  // Get 4 (at max) first items, sorted by price
  items = items.slice(0, 4).sort(function(item1, item2) {
    return item1.data.prixParJour - item2.data.prixParJour;
  });

  // Appel crea ope spe ret
  if (opSpeRet) {
    ADventori.conf.creaUrl = "[PROTOCOL][HOSTNAME]/lp/dd/europcar/Europcar_Netbooster_201507/creas/coupon/RET/[SIZE]/index.html";
    ADventori.conf.backup.creaUrl = "[PROTOCOL][HOSTNAME]/lp/dd/europcar/Europcar_Netbooster_201507/creas/coupon/backup/[DOMAIN]/[SIZE].jpg";
  }

  ADventori.conf.creaData['items'] = items;
  
  ADventori.conf.scenario = domain + '_step_' + c['s'];

  deepLink = ADventori.utils.addQueryParams('/DotcarClient/step2Direct.action', {
    "countryOfResidence": c['cr'],
    "checkoutCountry": c['oc'],
    "checkinCountry": c['ic'],
    "checkoutLocation": c['ol'],
    "checkinLocation": c['il'],
    "checkoutYear": checkOutDate.getFullYear(),
    "checkinYear": checkInDate.getFullYear(),
    "checkoutMonth": padNumber(checkOutDate.getMonth()+1),
    "checkinMonth": padNumber(checkInDate.getMonth()+1),
    "checkoutDay": padNumber(checkOutDate.getDate()),
    "checkinDay": padNumber(checkInDate.getDate()),
    "checkoutHour": padNumber(checkOutDate.getHours()),
    "checkinHour": padNumber(checkInDate.getHours()),
    "checkoutMinute": padNumber(checkOutDate.getMinutes()),
    "checkinMinute": padNumber(checkInDate.getMinutes()),
    "selectedAcrissCode": c['ac'],
    "promoCode": c['pc'],
    "couponCode": c['cc'],
    "Iata": c['ia']
  });
  
} else {
  
  //si backup
    //Gestion backup
  //ADventori.conf.displayBackup = true;
  //ADventori.conf.scenario = 'backupRet' + '_gen_' + c['s'];
  
  //si force ret
  force_ret_generic = true;
  ADventori.conf.creaUrl = '[PROTOCOL][HOSTNAME]/lp/dd/europcar/Europcar_Netbooster_201507/creas/new/RON/[SIZE]/index.html';
  
  error_nomStation = !condition_nomStation;
  error_items = !condition_items;
  error_lang = !condition_lang;
  error_currency = !condition_currency;
  error_date = !condition_date;
  error_force_ret = true;
  
  //ADventori.track.assert(false, 'error_force_ret');
}

  
ADventori.utils.extend(ADventori.conf.statData, {
  nomStation: nomStation,
  lang: lang,
  langPlacement: langPlacement,
  itemDevise: itemDevise,
  step: c['s'],
  ok: c['ok'],
  nbItems: items.length,
  
  CampID: CampID,

  error_CampID: error_CampID,
  error_nomStation: error_nomStation,
  error_items: error_items,
  error_lang: error_lang,
  error_currency: error_currency,
  error_date: error_date,
  error_force_ret: error_force_ret
});

})();

  
}

if( force_ret_generic || !isRet ) {

/* --- Scenarios idDBM OU GENERIQUE--- */

(function() {
  
var error_CampID = false;

// FORCE RET GENERIC (+ RET GENERIC: n'est plus censé être appelé)
if (force_ret_generic /*|| r_ret_generic*/) {
  campaignData = ADventori.data.campaignData.retGeneric;
  defaultCampID = 'UK_RET_BACKUP';
  retCampIds = {'UK': 'UK_RET_BACKUP'};
  domain = force_ret_generic ? r_ret[1] : r_ret_generic[1];
  CampID = retCampIds[domain] || (domain + '_RET_BACKUP');
  
  data = campaignData[CampID];
  if(!data) {
    data = campaignData[defaultCampID];
    error_CampID = true;
  }
  
  // AB-Test sur photo (50/50)
  //data.photo = ADventori.pools.getElement([data.photo1, data.photo2], null, 'photo');

//  Scenarios idDBM
} else {
  
  campaignData = ADventori.data.campaignData.acquisition;

  defaultCampID = 'UK_RET_BACKUP';
  //defaultCampID = 'UK_OP_SPE';
  
  var SegmentID = {};
  for (var id in campaignData) {
    var segment = campaignData[id];
    if (segment.idDBM) {
      var dbmIds = segment.idDBM.split('|');
      for (var i = 0; i < dbmIds.length; i++) {
        if (dbmIds[i]) {
          SegmentID[dbmIds[i]] = id;
        }
      }
    }
  }
  
  if (opSpe) {
    var campaignDataOpSpe = ADventori.data.campaignData.opeSpe;
    
    var SegmentIdOpSpe = {};
    for (var id in campaignDataOpSpe) {
      var segmentOpSpe = campaignDataOpSpe[id];
      if (segmentOpSpe.idDBM) {
        var dbmIdsOpSpe = segmentOpSpe.idDBM.split('|');
        for (var i = 0; i < dbmIdsOpSpe.length; i++) {
          if (dbmIdsOpSpe[i]) {
            SegmentIdOpSpe[dbmIdsOpSpe[i]] = id;
          }
        }
      }
    }
  }
  
  /*debug.log('SegmentID',SegmentID);*/
  if (opSpe && SegmentIdOpSpe[dbmPixelId]) {
    CampID = SegmentIdOpSpe[dbmPixelId];
    campaignData = campaignDataOpSpe;
    ADventori.conf.creaUrl = '[PROTOCOL][HOSTNAME]/lp/dd/europcar/Europcar_Netbooster_201507/creas/coupon/RON/[SIZE]/index.html';
  } else if( SegmentID[dbmPixelId]){
    CampID = SegmentID[dbmPixelId];
  } else {    
    error_CampID = true;
    CampID = defaultCampID;
  }
  
  data = campaignData[CampID];
  if(!data) {
    data = campaignData[defaultCampID];
    error_CampID = true;
  }
}

ADventori.conf.macros = {
  'ADV_STEP': 'STP1',
  'MARKET': CampID.split('_')[0]
};
ADventori.conf.creaData['items'] = [{
  id:1,
  data: {
    logo: data.logo,
    introStation: data.introStation,
    txt: data.txt,
    cta: data.cta,
    mentions: data.mentions,
    vignette1: data.vignette1,
    vignette2: data.vignette2,
    vignette3: data.vignette3,
    photo: ADventori.macros.replace('/lp/dd/europcar/Europcar_Netbooster_201507/creas/new/img/[SIZE]/' + data.photo)
  }
}];

ADventori.conf.scenario = (force_ret_generic ? 'forceRet' : (r_ret_generic ? 'ret' : 'ron')) + '_acq_' + CampID + '_' + dbmPixelId;

  
ADventori.utils.extend(ADventori.conf.statData, {
  photo: data.photo,
  CampID: CampID,
  error_CampID: error_CampID
});

})();

}

// Faire attention à bien avoir dans le clickTag ret: "/?xtor"
ADventori.conf.clickTag = deepLink ? data.clickTag.replace('/?xtor', deepLink + '&xtor') : data.clickTag;

ADventori.conf.displayTag = data.displayTag || null;
ADventori.conf.displayTagScript = data.adlooxtracking || null; // Seule ligne presente auparavant (suite modif fabien)

// Hack adloox: hide display pixel
(function() {
  var intervalId = setInterval(function() {
    var imgs = document.images;
    for (var i=0; i<imgs.length; i++) {
      if (/europcar\.commander1\.com/.test(imgs[i].src)) {
        imgs[i].style.display = 'none';
        clearInterval(intervalId);
      }
    }
  }, 200);
})();

/*debug.log(ADventori.conf.creaData);
debug.log(ADventori.conf.scenario);*/
debug.stack.pop();

}, 'conf', 'AdErrorConf');

ADventori.track.attempt(ADventori.autoStart, 'autoStart');

} catch(_e) {
  (function() {
    var campaignId = 0;
    var placementId = 0;
    var error = '';
    var context = '';
    var userAgent = '';
    try {
      if (_ADventori_data) {
        campaignId = _ADventori_data.campaign['campaignId'];
        placementId = _ADventori_data.placement['placementId'];
      }
    } catch(__e) {}
    try {
      error = (_e && _e.name ? (_e.name + ': ' + (_e.message || '')) : (_e || '')) + '';
    } catch(__e) {}
    try {
      try {
        context = window.top.location.href;
      } catch(__e) {
        context = window.document.referrer;
      }
    } catch(__e) {}
    try {
      userAgent = (window.navigator && window.navigator.userAgent);
    } catch(__e) {}
    document.createElement('img').src = ('https://adventori.com/tracker/trackPrint?tk_type=AdErrorInitJs' + '&tk_campaignId=' + encodeURIComponent(campaignId) + '&tk_cartoucheId=' + encodeURIComponent(placementId) + '&tk_urlClick=' + encodeURIComponent(error) + '&tk_context=' + encodeURIComponent(context) + '&tk_retailer_4=' + encodeURIComponent(userAgent));
    try {
      window.console && window.console.error && window.console.error('[ADventori]', 'AdErrorInitJs', _e);
    } catch(__e) {}
  })();
}

})();
